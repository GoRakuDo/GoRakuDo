# アクセシビリティテストガイド

## 概要

GoRakuDoプロジェクトのページネーションシステムにおけるWCAG 2.1 AA準拠の確認とテスト手順を説明します。

## テスト環境の準備

### 必要なツール

#### ブラウザ
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

#### スクリーンリーダー
- **Windows**: NVDA (無料), JAWS (有料)
- **macOS**: VoiceOver (内蔵)
- **Linux**: Orca (無料)

#### アクセシビリティテストツール
- **Chrome DevTools**: アクセシビリティタブ
- **axe DevTools**: ブラウザ拡張機能
- **WAVE**: Web Accessibility Evaluation Tool
- **Lighthouse**: アクセシビリティ監査

## WCAG 2.1 AA準拠テスト

### 1. スクリーンリーダーテスト

#### テスト手順
1. スクリーンリーダーを起動
2. ページネーションコンポーネントにフォーカス
3. 各要素の読み上げ内容を確認

#### 期待される結果
- ナビゲーションランドマークが認識される
- ページ情報が「ページ 1 / 5」のように読み上げられる
- ボタンが「前のページ」「次のページ」として認識される
- 現在のページが「ページ 2（現在のページ）」として明示される
- 無効なボタンが「前のページ（利用不可）」として認識される

#### テスト項目
- [ ] ナビゲーションランドマークの認識
- [ ] ページ情報の読み上げ
- [ ] ボタンラベルの読み上げ
- [ ] 現在のページの明示
- [ ] 無効なボタンの状態読み上げ
- [ ] ページ番号の読み上げ
- [ ] リンクの目的の明確化

### 2. キーボードナビゲーションテスト

#### テスト手順
1. Tabキーでページネーションコンポーネントにフォーカス
2. Tabキーで各要素を順次移動
3. Enterキーでページ遷移をテスト
4. Shift+Tabで逆順移動をテスト

#### 期待される結果
- Tabキーで順次移動できる
- Enterキーでページ遷移できる
- フォーカスが視覚的に表示される
- 無効なボタンはフォーカスを受け取らない

#### テスト項目
- [ ] Tabキーでの順次移動
- [ ] Shift+Tabでの逆順移動
- [ ] Enterキーでのページ遷移
- [ ] Spaceキーでのページ遷移
- [ ] フォーカス表示の確認
- [ ] 無効なボタンのフォーカス制御

### 3. 視覚的アクセシビリティテスト

#### カラーコントラストテスト
1. Chrome DevToolsのアクセシビリティタブを開く
2. 各テキスト要素のコントラスト比を確認
3. 4.5:1以上の比率を確認

#### フォントサイズテスト
1. ブラウザのズーム機能を使用
2. 200%まで拡大して表示を確認
3. レイアウトが崩れないことを確認

#### 高コントラストモードテスト
1. システムの高コントラストモードを有効化
2. ページネーションコンポーネントの表示を確認
3. すべての要素が視認できることを確認

#### テスト項目
- [ ] カラーコントラスト比（4.5:1以上）
- [ ] フォントサイズ拡大（200%まで）
- [ ] 高コントラストモードでの表示
- [ ] ズーム機能での表示（400%まで）
- [ ] カラーのみに依存しない情報伝達
- [ ] フォーカス表示の視認性

### 4. モバイルアクセシビリティテスト

#### タッチターゲットテスト
1. モバイルデバイスでページを表示
2. 各ボタンのタッチターゲットサイズを確認
3. 44px以上のサイズを確認

#### タッチ操作テスト
1. 各ボタンをタップして動作を確認
2. スワイプ操作でのページ遷移をテスト
3. ピンチズームでの表示を確認

#### テスト項目
- [ ] タッチターゲットサイズ（44px以上）
- [ ] タッチ操作の反応性
- [ ] スワイプ操作の対応
- [ ] ピンチズームでの表示
- [ ] 画面回転での表示

## デバイステスト

### デスクトップブラウザ

#### Chrome
1. 最新版Chromeでページを表示
2. DevToolsのアクセシビリティタブで監査
3. axe DevTools拡張機能で詳細テスト

#### Firefox
1. 最新版Firefoxでページを表示
2. アクセシビリティインスペクターを使用
3. キーボードナビゲーションをテスト

#### Safari
1. 最新版Safariでページを表示
2. VoiceOverでスクリーンリーダーテスト
3. アクセシビリティインスペクターを使用

#### Edge
1. 最新版Edgeでページを表示
2. アクセシビリティタブで監査
3. キーボードナビゲーションをテスト

### モバイルデバイス

#### iPhone
1. Safariでページを表示
2. VoiceOverでスクリーンリーダーテスト
3. タッチ操作をテスト

#### Android
1. Chromeでページを表示
2. TalkBackでスクリーンリーダーテスト
3. タッチ操作をテスト

#### iPad
1. Safariでページを表示
2. VoiceOverでスクリーンリーダーテスト
3. タッチ操作とキーボード操作をテスト

## エッジケーステスト

### 1ページのみの場合
- ページネーションコンポーネントが表示されないことを確認
- ナビゲーション要素が存在しないことを確認

### 2ページの場合
- 最小限のページネーションが表示されることを確認
- 前のページボタンが無効になることを確認

### 大量ページの場合
- 100ページ以上のページネーションが正常に動作することを確認
- パフォーマンスが低下しないことを確認

### 無効なページ番号へのアクセス
- 存在しないページ番号にアクセスした場合のリダイレクトを確認
- エラーページが表示されないことを確認

### JavaScript無効環境
- 基本的なページネーションが動作することを確認
- フォーム送信によるページ遷移が動作することを確認

## 問題の特定と修正

### よくある問題

#### 1. カラーコントラスト不足
**問題**: テキストと背景のコントラスト比が4.5:1未満
**修正**: カラー値を調整してコントラスト比を向上

#### 2. フォーカス表示不足
**問題**: キーボードフォーカスが視覚的に分からない
**修正**: フォーカススタイルを追加・強化

#### 3. スクリーンリーダー対応不足
**問題**: 要素の役割や状態が読み上げられない
**修正**: ARIA属性を追加・修正

#### 4. タッチターゲット不足
**問題**: ボタンが44px未満でタッチしにくい
**修正**: 最小サイズを44px以上に調整

### 修正手順

1. **問題の特定**: テスト結果から問題を特定
2. **優先度の決定**: 影響度に応じて優先度を決定
3. **修正の実装**: コードを修正
4. **再テスト**: 修正後に再テストを実行
5. **文書化**: 修正内容を文書化

## 継続的テスト

### 自動テスト
- CI/CDパイプラインにアクセシビリティテストを組み込み
- axe-coreを使用した自動テストの実装

### 定期テスト
- 月次でのアクセシビリティ監査
- 新機能追加時のアクセシビリティ確認

### ユーザーテスト
- 実際のユーザーによるアクセシビリティテスト
- フィードバックの収集と改善

## 参考資料

- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [WebAIM Resources](https://webaim.org/)
- [axe DevTools Documentation](https://www.deque.com/axe/devtools/)
- [Chrome DevTools Accessibility](https://developers.google.com/web/tools/chrome-devtools/accessibility)

---

**作成日**: 2024-12-20  
**バージョン**: 1.0  
**ステータス**: 実装完了  
**担当**: Winston (Architect)
