# ページネーション統合テストガイド

## 概要

このドキュメントは、GoRakuDoプロジェクトのページネーション機能の統合テスト手順を説明します。

## テスト環境

- **開発サーバー**: `npm run dev`
- **ベースURL**: `http://localhost:4321/docs`
- **テスト対象**: `src/pages/docs/index.astro`

## テストケース

### 1. 基本機能テスト

#### 1.1 ページ1の表示
- **URL**: `http://localhost:4321/docs`
- **期待結果**:
  - 最初の6記事が表示される
  - ページネーションコンポーネントが表示される（記事数が6を超える場合）
  - タイトルが「Dokumentasi & Panduan」である
  - メタデータが正しく設定されている

#### 1.2 ページ1（明示的）
- **URL**: `http://localhost:4321/docs?page=1`
- **期待結果**:
  - 上記と同じ結果
  - URLが`/docs`に正規化される（リダイレクト）

#### 1.3 ページ2の表示
- **URL**: `http://localhost:4321/docs?page=2`
- **期待結果**:
  - 7-12番目の記事が表示される
  - タイトルが「ページ 2 - Dokumentasi & Panduan」である
  - 前のページ・次のページボタンが正しく表示される

### 2. エラーハンドリングテスト

#### 2.1 無効なページ番号（負の数）
- **URL**: `http://localhost:4321/docs?page=-1`
- **期待結果**:
  - 301リダイレクトで`/docs?page=1`に移動
  - コンソールに警告メッセージが表示される

#### 2.2 無効なページ番号（文字列）
- **URL**: `http://localhost:4321/docs?page=abc`
- **期待結果**:
  - 301リダイレクトで`/docs?page=1`に移動
  - コンソールに警告メッセージが表示される

#### 2.3 存在しないページ（大きな数）
- **URL**: `http://localhost:4321/docs?page=999`
- **期待結果**:
  - 301リダイレクトで最後のページに移動
  - コンソールに警告メッセージが表示される

### 3. ブラウザナビゲーションテスト

#### 3.1 戻るボタンテスト
1. `/docs`にアクセス
2. ページ2に移動
3. ブラウザの戻るボタンをクリック
4. **期待結果**: ページ1に正しく戻る

#### 3.2 進むボタンテスト
1. `/docs`にアクセス
2. ページ2に移動
3. ブラウザの戻るボタンでページ1に戻る
4. ブラウザの進むボタンをクリック
5. **期待結果**: ページ2に正しく進む

### 4. SEO最適化テスト

#### 4.1 メタデータ確認
- **ページ1**: タイトルにページ番号が含まれない
- **ページ2以降**: タイトルにページ番号が含まれる
- **正規化URL**: ページ1ではクエリパラメータが除去される

#### 4.2 構造化データ確認
- ブラウザの開発者ツールでHTMLを確認
- JSON-LDスクリプトタグが正しく生成されている
- ページネーション情報が含まれている

#### 4.3 rel属性確認
- `rel="next"`: 次のページがある場合に設定
- `rel="prev"`: 前のページがある場合に設定
- ページ2以降で`noindex, follow`が設定される

### 5. レスポンシブデザインテスト

#### 5.1 モバイル表示
- 画面幅を320pxに設定
- ページネーションコンポーネントが適切に表示される
- タッチ操作が正常に動作する

#### 5.2 タブレット表示
- 画面幅を768pxに設定
- レイアウトが横並びに変更される
- ボタンサイズが適切に調整される

#### 5.3 デスクトップ表示
- 画面幅を1280px以上に設定
- 最大幅制限が適用される
- ホバー効果が正常に動作する

### 6. アクセシビリティテスト

#### 6.1 キーボードナビゲーション
- Tabキーでページネーション要素を順次移動
- Enterキーでページ遷移が実行される
- フォーカス表示が明確である

#### 6.2 スクリーンリーダー対応
- ARIA属性が正しく設定されている
- 現在のページが適切に読み上げられる
- ナビゲーションの目的が明確である

### 7. パフォーマンステスト

#### 7.1 ページ読み込み速度
- 各ページの読み込み時間を測定
- FCP < 1.5秒
- LCP < 2.5秒
- TTI < 3.0秒

#### 7.2 メモリ使用量
- 大量のページでもメモリリークが発生しない
- ページ遷移時のメモリ使用量が適切

## テスト実行手順

### 1. 開発サーバーの起動
```bash
npm run dev
```

### 2. ブラウザでのテスト
1. 上記のテストケースを順次実行
2. 各テストケースの結果を記録
3. 問題が発見された場合は詳細を記録

### 3. コンソールログの確認
- 開発者ツールのコンソールを開く
- デバッグ情報とエラーメッセージを確認
- 警告やエラーがないことを確認

### 4. ネットワークタブの確認
- リダイレクトが正しく実行されている
- 不要なリクエストが発生していない
- キャッシュが適切に動作している

## 期待される結果

### 成功条件
- すべてのテストケースが期待通りに動作する
- エラーハンドリングが適切に機能する
- SEO最適化が正しく実装されている
- アクセシビリティ要件を満たしている
- パフォーマンス目標を達成している

### 失敗時の対応
1. 問題の詳細を記録
2. コンソールログを確認
3. 該当するコードを修正
4. 再テストを実行

## 注意事項

- テストは実際のコンテンツデータで実行する
- 異なるブラウザでテストを実行する
- モバイルデバイスでもテストを実行する
- ネットワーク速度を変えてテストを実行する

## 関連ファイル

- `src/pages/docs/index.astro` - メインのページファイル
- `src/components/common/Pagination.astro` - ページネーションコンポーネント
- `src/scripts/test-pagination.ts` - テスト用スクリプト
