# 包括的テストガイド

## 概要

GoRakuDoプロジェクトのページネーションシステムにおける包括的なテスト手順を説明します。全ページ、エッジケース、ブラウザ互換性のテストを含みます。

## テスト環境の準備

### 必要な環境
- Node.js 18+
- 複数のブラウザ（Chrome、Firefox、Safari、Edge）
- モバイルデバイス（iPhone、Android）
- アクセシビリティテストツール

### テストデータの準備
```bash
# 開発サーバーの起動
npm run dev

# テスト用の記事データを準備（必要に応じて）
# 大量のテストデータを作成してページネーションをテスト
```

## ページ別テスト

### 1. ドキュメントページ（/docs）

#### テストケース
- [ ] ページ1の表示（クエリパラメータなし）
- [ ] ページ2の表示（?page=2）
- [ ] ページ3の表示（?page=3）
- [ ] 最後のページの表示
- [ ] 無効なページ番号へのアクセス
- [ ] ページネーションコンポーネントの表示/非表示

#### テスト手順
1. `/docs`にアクセス
2. ページネーションコンポーネントの表示を確認
3. 各ページ番号をクリックしてページ遷移を確認
4. 前のページ・次のページボタンの動作を確認
5. 無効なページ番号（例：?page=999）にアクセスしてリダイレクトを確認

#### 期待される結果
- ページ1では「前のページ」ボタンが無効
- 最後のページでは「次のページ」ボタンが無効
- 無効なページ番号では適切なページにリダイレクト
- ページネーション情報が正しく表示される

### 2. ツールページ（/tools/[tool]）

#### テスト対象
- `/tools/anki`
- `/tools/migaku`
- `/tools/yomitan`

#### テストケース
- [ ] ページ1の表示
- [ ] ページ2の表示
- [ ] ページネーションの動作
- [ ] URLパラメータの保持
- [ ] ツール固有のコンテンツとの統合

#### テスト手順
1. 各ツールページにアクセス
2. ページネーションコンポーネントの表示を確認
3. ページ遷移の動作を確認
4. ツール固有のコンテンツが正しく表示されることを確認

#### 期待される結果
- 各ツールページでページネーションが正常動作
- ツール固有のコンテンツとページネーションが適切に統合
- URLパラメータが正しく保持される

## エッジケーステスト

### 1. 1ページのみの場合

#### テスト条件
- 記事が6件以下の場合

#### 期待される動作
- ページネーションコンポーネントが表示されない
- ナビゲーション要素が存在しない

#### テスト手順
1. 記事数を6件以下に調整
2. ページを再読み込み
3. ページネーションコンポーネントが表示されないことを確認

### 2. 2ページの場合

#### テスト条件
- 記事が7-12件の場合

#### 期待される動作
- 最小限のページネーションが表示
- 前のページボタンが無効
- 次のページボタンが有効

#### テスト手順
1. 記事数を7-12件に調整
2. ページを再読み込み
3. ページネーションの動作を確認

### 3. 大量ページの場合

#### テスト条件
- 記事が100件以上の場合

#### 期待される動作
- ページネーションが正常に動作
- パフォーマンスが良好
- メモリ使用量が適切

#### テスト手順
1. 記事数を100件以上に調整
2. ページを再読み込み
3. パフォーマンスを測定
4. ページネーションの動作を確認

### 4. 無効なページ番号

#### テストケース
- 存在しないページ番号（?page=999）
- 負のページ番号（?page=-1）
- 文字列のページ番号（?page=abc）
- 空のページ番号（?page=）

#### 期待される動作
- 適切なページにリダイレクト
- エラーページが表示されない
- ユーザーに分かりやすい動作

#### テスト手順
1. 各無効なページ番号にアクセス
2. リダイレクトの動作を確認
3. エラーページが表示されないことを確認

## ブラウザ互換性テスト

### 1. Chrome 90+

#### テスト項目
- [ ] レイアウトの表示
- [ ] インタラクションの動作
- [ ] アクセシビリティ機能
- [ ] パフォーマンス

#### テスト手順
1. Chrome 90+でページを表示
2. ページネーションの動作を確認
3. DevToolsでパフォーマンスを測定
4. アクセシビリティタブで監査

### 2. Firefox 88+

#### テスト項目
- [ ] レイアウトの表示
- [ ] インタラクションの動作
- [ ] アクセシビリティ機能
- [ ] パフォーマンス

#### テスト手順
1. Firefox 88+でページを表示
2. ページネーションの動作を確認
3. アクセシビリティインスペクターを使用
4. パフォーマンスを測定

### 3. Safari 14+

#### テスト項目
- [ ] レイアウトの表示
- [ ] インタラクションの動作
- [ ] アクセシビリティ機能
- [ ] パフォーマンス

#### テスト手順
1. Safari 14+でページを表示
2. ページネーションの動作を確認
3. VoiceOverでアクセシビリティをテスト
4. パフォーマンスを測定

### 4. Edge 90+

#### テスト項目
- [ ] レイアウトの表示
- [ ] インタラクションの動作
- [ ] アクセシビリティ機能
- [ ] パフォーマンス

#### テスト手順
1. Edge 90+でページを表示
2. ページネーションの動作を確認
3. アクセシビリティタブで監査
4. パフォーマンスを測定

## パフォーマンステスト

### 1. Core Web Vitals

#### メトリクス
- **FCP (First Contentful Paint)**: < 1.5秒
- **LCP (Largest Contentful Paint)**: < 2.5秒
- **TTI (Time to Interactive)**: < 3.0秒
- **CLS (Cumulative Layout Shift)**: < 0.1
- **FID (First Input Delay)**: < 100ms

#### テスト手順
1. Chrome DevToolsのLighthouseタブを開く
2. アクセシビリティとパフォーマンスの監査を実行
3. 各メトリクスの値を確認
4. 目標値を下回ることを確認

### 2. ページネーション固有のメトリクス

#### メトリクス
- **ページ遷移時間**: < 200ms
- **ページネーションコンポーネントのレンダリング時間**: < 100ms
- **メモリ使用量の増加**: < 10MB
- **CPU使用率の増加**: < 5%

#### テスト手順
1. DevToolsのPerformanceタブを開く
2. ページネーションの操作を記録
3. 各メトリクスを測定
4. 目標値を下回ることを確認

## モバイルデバイステスト

### 1. iPhone

#### テスト項目
- [ ] タッチ操作
- [ ] 音声読み上げ
- [ ] ズーム機能
- [ ] 画面回転

#### テスト手順
1. iPhoneのSafariでページを表示
2. タッチ操作でページネーションを操作
3. VoiceOverでアクセシビリティをテスト
4. ズーム機能で表示を確認

### 2. Android

#### テスト項目
- [ ] タッチ操作
- [ ] 音声読み上げ
- [ ] ズーム機能
- [ ] 画面回転

#### テスト手順
1. AndroidのChromeでページを表示
2. タッチ操作でページネーションを操作
3. TalkBackでアクセシビリティをテスト
4. ズーム機能で表示を確認

## 問題の特定と修正

### よくある問題

#### 1. レイアウトの問題
**症状**: ブラウザによって表示が異なる
**原因**: CSSの互換性問題
**修正**: ベンダープレフィックスの追加、フォールバックの提供

#### 2. パフォーマンスの問題
**症状**: ページ遷移が遅い
**原因**: 不要な再レンダリング
**修正**: メモ化の実装、最適化の適用

#### 3. アクセシビリティの問題
**症状**: スクリーンリーダーで正しく読み上げられない
**原因**: ARIA属性の不足
**修正**: 適切なARIA属性の追加

#### 4. モバイルでの問題
**症状**: タッチ操作が反応しない
**原因**: タッチターゲットサイズの不足
**修正**: 最小サイズの確保

### 修正手順

1. **問題の特定**: テスト結果から問題を特定
2. **原因の分析**: 問題の根本原因を分析
3. **修正の実装**: コードを修正
4. **再テスト**: 修正後に再テストを実行
5. **文書化**: 修正内容を文書化

## 継続的テスト

### 自動テスト
- CI/CDパイプラインにテストを組み込み
- 自動化されたテストの実行

### 定期テスト
- 月次での包括的テスト
- 新機能追加時のテスト

### ユーザーテスト
- 実際のユーザーによるテスト
- フィードバックの収集と改善

## テスト結果の記録

### テストレポートテンプレート

```markdown
# ページネーションシステム テストレポート

## テスト日時
- 実行日: YYYY-MM-DD
- 実行者: [名前]
- 環境: [OS, ブラウザ, バージョン]

## テスト結果
### ページ別テスト
- [ ] ドキュメントページ
- [ ] ツールページ（Anki）
- [ ] ツールページ（Migaku）
- [ ] ツールページ（Yomitan）

### エッジケーステスト
- [ ] 1ページのみの場合
- [ ] 2ページの場合
- [ ] 大量ページの場合
- [ ] 無効なページ番号

### ブラウザ互換性テスト
- [ ] Chrome 90+
- [ ] Firefox 88+
- [ ] Safari 14+
- [ ] Edge 90+

### パフォーマンステスト
- [ ] Core Web Vitals
- [ ] ページネーション固有のメトリクス

## 発見された問題
1. [問題の説明]
   - 影響度: [高/中/低]
   - 修正方法: [修正方法の説明]

## 推奨事項
1. [改善提案]
2. [今後の対応]

## 総合評価
- 合格/要修正
- コメント: [総合的な評価]
```

---

**作成日**: 2024-12-20  
**バージョン**: 1.0  
**ステータス**: 実装完了  
**担当**: Winston (Architect)
