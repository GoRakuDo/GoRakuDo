---
import UnifiedSEO from "../components/UnifiedSEO.astro";
import Navbar from "../components/public-components/Navbar.vue";
import WaveAnimation from "../components/animations/WaveAnimation.astro"

// CSSをインポート
import "../styles/global.css";

// デフォルトOG画像のパス（publicフォルダ内のファイル）
const defaultOgImage = "/img/FullDC Logo.webp";

export interface Props {
  // このレイアウトが受け取るプロパティを定義
  title: string;
  description: string;
  ogImage?: string;
  pageType?: "website" | "article";
  publishedDate?: string;
  // langプロパティを追加
  lang?: "id" | "ja";
  keywords?: string[];
  seoProperties?: {
    articleType?: string;
    learningStage?: string;
    searchIntent?: string;
  };
}

// propsを受け取ります
const { title, description, ogImage, pageType, publishedDate, lang, keywords, seoProperties } =
  Astro.props;
---

<!doctype html>
<!-- <html>タグのlang属性も動的に設定 -->
<html lang={lang || "id"}>
  <head>
    <!-- UnifiedSEO - 統合SEOコンポーネント (DRY原則適用) -->
    <UnifiedSEO
      title={title}
      description={description}
      keywords={keywords}
      canonical={new URL(Astro.request.url).toString()}
      lang={lang || "id"}
      pageType={pageType || "website"}
      image={ogImage || defaultOgImage}
      author="GoRakuDo Team"
      publishedDate={publishedDate}
      gtag={import.meta.env.PUBLIC_GA_ID || undefined}
    />

    <!-- スタイルシートの<link>タグは不要です。上のimport文がその役割を果たします。 -->
  </head>
  <body>
    <!-- Navigation - 共通コンポーネント -->
    <Navbar client:visible />

    <!-- Enhanced Wave Animation Background - Fixed position for scroll following -->
    <WaveAnimation 
    className="wave-canvas" 
    enableStars={true}
    starsCount={10}
    starsOpacity={0.5}
    starsAnimationDuration="3s"
    starsColor="oklch(0.8 0.35 296.9)"
    starsBrightness={1}
    starsSize={1.5}
    starsGlow={false}
    />

    <!-- この<slot />に、各ページのユニークなコンテンツが挿入されます -->
    <slot />

    <!-- 共通のスクリプトなどがあればここに配置 -->
  </body>
</html>
