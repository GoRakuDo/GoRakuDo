---
// ========== IMPORTS ==========
import UnifiedSEO from '../components/UnifiedSEO.astro';
import Navbar from '../components/common/NavBar/Navbar.astro';
import BottomNavBar from '../components/common/NavBar/BottomNavBar.astro';
import WaveAnimation from '../components/animations/WaveAnimation.astro';
import '../styles/global.css';
import '../styles/layouts/ArticleLayout.css';

// ========== TYPE DEFINITIONS ==========
export interface Props {
  title: string;
  description: string;
  publishedDate?: string;
  lang?: 'id' | 'ja';
  author?: string;
  tags?: string[];
  currentPage?: number;
  totalPages?: number;
  baseUrl?: string;
  breadcrumbSchema?: {
    '@context': 'https://schema.org';
    '@type': 'BreadcrumbList';
    itemListElement: Array<{
      '@type': 'ListItem';
      position: number;
      name: string;
      item: string;
    }>;
  };
}

// ========== PROPS DESTRUCTURING ==========
const {
  title,
  description,
  publishedDate,
  lang = 'id',
  author,
  tags = [],
  currentPage,
  totalPages,
  baseUrl,
  breadcrumbSchema,
} = Astro.props;

// ========== LAYOUT CONFIGURATION ==========
const LAYOUT_CONFIG = {
  navbarSpacing: '5rem',
  containerMaxWidth: '1200px',
} as const;
---

<!doctype html>
<html lang={lang}>
  <head>
    <UnifiedSEO
      title={title}
      description={description}
      keywords={tags}
      lang={lang}
      pageType='article'
      author={author}
      publishedDate={publishedDate}
      modifiedDate={publishedDate}
      currentPage={currentPage}
      totalPages={totalPages}
      baseUrl={baseUrl}
      breadcrumbSchema={breadcrumbSchema}
    />
  </head>
  <body>
    <Navbar />
    <BottomNavBar />
    <WaveAnimation backgroundLayer='normal' />

    <div class='article-layout-container'>
      <main
        class='article-main-content'
        style={`padding-top: ${LAYOUT_CONFIG.navbarSpacing};`}
        role='main'
        aria-label='Main content'
      >
        <div class='article-content-wrapper'>
          <slot name='articles-header' />

          <nav
            class='tool-navigation-wrapper'
            role='navigation'
            aria-label='Tool navigation'
          >
            <div class='breadcrumb-section glassmorphism'>
              <slot name='breadcrumb' />
            </div>
            <div class='search-section'>
              <slot name='search' />
            </div>
          </nav>

          <div class='page-content' role='region' aria-label='Page content'>
            <slot />
          </div>

          <div
            class='pagination-wrapper'
            role='navigation'
            aria-label='Pagination'
          >
            <slot name='pagination' />
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
