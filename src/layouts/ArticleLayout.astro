---
// ========== ARTICLE LAYOUT COMPONENT ==========
// Centralized data management - this component only handles layout structure
// All data processing is done in the parent index.astro
import UnifiedSEO from '../components/UnifiedSEO.astro';

import Navbar from '../components/common/NavBar/Navbar.astro';
import BottomNavBar from '../components/common/NavBar/BottomNavBar.astro';

// Animation
import WaveAnimation from '../components/animations/WaveAnimation.astro';

// Global CSS
import '../styles/global.css';
import '../styles/layouts/ArticleLayout.css';

export interface Props {
  title: string;
  description: string;
  publishedDate?: string;
  lang?: 'id' | 'ja';
  author?: string;
  tags?: string[];
  // Breadcrumb Schema統合
  breadcrumbSchema?: {
    '@context': 'https://schema.org';
    '@type': 'BreadcrumbList';
    itemListElement: Array<{
      '@type': 'ListItem';
      position: number;
      name: string;
      item: string;
    }>;
  };
}

const {
  title,
  description,
  publishedDate,
  lang = 'id',
  author,
  tags = [],
  breadcrumbSchema,
} = Astro.props;
---

<!doctype html>
<html lang={lang}>
  <head>
    <UnifiedSEO
      title={title}
      description={description}
      keywords={tags}
      lang={lang}
      pageType='article'
      author={author}
      publishedDate={publishedDate}
      modifiedDate={publishedDate}
      breadcrumbSchema={breadcrumbSchema}
    />
  </head>
  <body>
    <!-- Navigation - 共通コンポーネント -->
    <Navbar />
    <BottomNavBar />

    <!-- Background Wave Animation -->
    <WaveAnimation
      backgroundLayer='normal'
      enableStars={true}
      starsCount={6}
      starsOpacity={0.7}
      starsAnimationDuration='4s'
      starsColor='oklch(0.7 0.3 296.9)'
      starsBrightness={1.3}
      starsSize={1.1}
      starsGlow={true}
    />

    <!-- Enhanced Article Container with Modern Design -->
    <div class='article-layout-container'>
      <!-- Enhanced Main Content Area with Navbar Spacing -->
      <main class='article-main-content' style='padding-top: 5rem;'>
        <div class='article-content-wrapper'>
          <!-- Tool ID Header -->
          <slot name='articles-header' />

          <!-- Optimized Navigation with Enhanced Spacing -->
          <div class='tool-navigation-wrapper'>
            <div class='breadcrumb-section glassmorphism'>
              <slot name='breadcrumb' />
            </div>

            <div class='search-section'>
              <!-- Search Popover Component -->
              <slot name='search' />
            </div>
          </div>

          <!-- Page Content Slot -->
          <div class='page-content'>
            <slot />
          </div>

          <!-- Pagination Slot -->
          <div class='pagination-wrapper'>
            <slot name='pagination' />
          </div>
        </div>
      </main>
    </div>
  </body>
</html>
