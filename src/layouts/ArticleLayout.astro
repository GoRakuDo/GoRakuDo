---
// ========== IMPORTS ==========
import UnifiedSEO, {
  type Props as UnifiedSEOProps,
} from '../components/UnifiedSEO.astro';
import Navbar from '../components/common/NavBar/Navbar.astro';
import BottomNavBar from '../components/common/NavBar/BottomNavBar.astro';
import WaveAnimation from '../components/animations/WaveAnimation.astro';
import '../styles/global.css';
import '../styles/layouts/ArticleLayout.css';

// ========== TYPE DEFINITIONS ==========
export interface Props {
  title: string;
  description: string;
  publishedDate?: string;
  lang?: 'id' | 'ja';
  author?: string;
  tags?: string[];
  image?: string;
  currentPage?: number;
  totalPages?: number;
  baseUrl?: string;
  breadcrumbSchema?: UnifiedSEOProps['breadcrumbSchema'];
  faqSchema?: UnifiedSEOProps['faqSchema'];
  howToSchema?: UnifiedSEOProps['howToSchema'];
  collectionPageSchema?: UnifiedSEOProps['collectionPageSchema'];
  softwareApplicationSchema?: UnifiedSEOProps['softwareApplicationSchema'];
}

// ========== PROPS DESTRUCTURING ==========
const {
  title,
  description,
  publishedDate,
  lang = 'id',
  author,
  tags = [],
  image,
  currentPage,
  totalPages,
  baseUrl,
  breadcrumbSchema,
  faqSchema,
  howToSchema,
  collectionPageSchema,
  softwareApplicationSchema,
} = Astro.props;

// ========== IMAGE FALLBACK PROCESSING ==========
// ArticleLayoutでは画像を指定しない場合、UnifiedSEOでデフォルト画像が使用される

// ========== LAYOUT CONFIGURATION ==========
const LAYOUT_CONFIG = {
  navbarSpacing: '5rem',
  containerMaxWidth: '1200px',
} as const;
---

<!doctype html>
<html lang={lang}>
  <head>
    <UnifiedSEO
      title={title}
      description={description}
      keywords={tags}
      lang={lang}
      pageType='article'
      image={image}
      author={author}
      publishedDate={publishedDate}
      modifiedDate={publishedDate}
      currentPage={currentPage}
      totalPages={totalPages}
      baseUrl={baseUrl}
      breadcrumbSchema={breadcrumbSchema}
      faqSchema={faqSchema}
      howToSchema={howToSchema}
      collectionPageSchema={collectionPageSchema}
      softwareApplicationSchema={softwareApplicationSchema}
    />
  </head>
  <body>
    <Navbar />
    <BottomNavBar />
    <WaveAnimation backgroundLayer='normal' />

    <div class='article-layout-container'>
      <main
        class='article-main-container'
        role='main'
        aria-label='Main content'
      >
        <!-- Header Slot -->
        <slot name='articles-header' />

        <!-- Navigation Wrapper -->
        <nav
          class='article-navigation'
          role='navigation'
          aria-label='Tool navigation'
        >
          <div class='breadcrumb-section glassmorphism'>
            <slot name='breadcrumb' />
          </div>
          <div class='search-section'>
            <slot name='search' />
          </div>
        </nav>

        <!-- Article Body -->
        <article class='article-body' role='article'>
          <slot />
        </article>

        <!-- Pagination -->
        <div
          class='pagination-container'
          role='navigation'
          aria-label='Pagination'
        >
          <slot name='pagination' />
        </div>
      </main>
    </div>
  </body>
</html>
