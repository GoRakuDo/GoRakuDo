---
// Navbar.astro - Astro Native Navigation Component
// GoRakuDo Engineering Team 2025 - Astro + Tailwind v4.1
// ARCHITECTURAL DECISION: Astro-native approach with zero JavaScript by default
// PERFORMANCE: CSS-only scroll animations, minimal JavaScript for interactivity

// ========== ASTRO-NATIVE PROPS INTERFACE ==========
export interface Props {
  // KISS Principle: Essential props only
  variant?: 'default' | 'minimal' | 'glass';
  theme?: 'dark' | 'light' | 'auto';
  className?: string;
}

// ========== ASTRO-NATIVE DEFAULT PROPS ==========
const { variant = 'default', theme = 'auto', className = '' } = Astro.props;

// ========== NAVIGATION CONFIGURATION ==========
// REASONING: Centralized route management following DRY principle
const NAV_ROUTES = {
  resources: { path: '/docs', label: 'Resources' },
  posts: { path: '/docs', label: 'Posts' },
  tools: { path: '/tools', label: 'Tools' },
  panduan: { path: '/docs', label: 'Panduan' },
} as const;

// ========== ASTRO-NATIVE NAVIGATION ITEMS ==========
const navItems = Object.entries(NAV_ROUTES).map(([key, route]) => ({
  key,
  ...route,
}));
---

<div class={`navbar-wrapper ${className}`}>
  <nav class='navbar' role='navigation' aria-label='Main navigation'>
    <div class='nav-container'>
      <!-- Left Navigation - Desktop Only -->
      <div class='nav-left'>
        {
          navItems.map(item => (
            <span
              class='nav-item'
              role='button'
              tabindex='0'
              data-route={item.key}
              data-path={item.path}
            >
              {item.label}
            </span>
          ))
        }
      </div>

      <!-- Center Logo -->
      <div class='nav-center'>
        <a
          href='/'
          class='logo-japanese'
          aria-label='GoRakuDo - Kembali ke beranda'
          title='GoRakuDo - Kembali ke beranda'
        >
          語楽道
        </a>
      </div>

      <!-- Right Actions - Desktop Only -->
      <div class='nav-right'>
        <button
          class='get-started-btn'
          data-action='metodologi'
          aria-label='Lihat metodologi pembelajaran'
        >
          <svg
            class='nav-svg-icon'
            width='16'
            height='16'
            viewBox='0 0 24 24'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
            aria-hidden='true'
          >
            <path
              d='M11 3V11L14 8L17 11V3M5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3Z'
              stroke-width='2'
              stroke-linecap='round'
              stroke-linejoin='round'></path>
          </svg>
          Metodologi
        </button>
        <button
          class='get-started-btn'
          data-action='get-started'
          aria-label='Mulai perjalanan belajar bahasa Jepang'
        >
          Mulai Sekarang
        </button>
      </div>

      <!-- Mobile Menu Button -->
      <button
        class='mobile-menu-btn'
        data-action='discord'
        aria-label='Gabung komunitas Discord'
      >
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width='16'
          height='16'
          viewBox='0 0 24 24'
          class='nav-svg-icon lucide lucide-gamepad2-icon lucide-gamepad-2'
          aria-hidden='true'
        >
          <line x1='6' x2='10' y1='11' y2='11'></line>
          <line x1='8' x2='8' y1='9' y2='13'></line>
          <line x1='15' x2='15.01' y1='12' y2='12'></line>
          <line x1='18' x2='18.01' y1='10' y2='10'></line>
          <path
            d='M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z'
            stroke-width='2'
            stroke-linecap='round'
            stroke-linejoin='round'></path>
        </svg>
        Join
      </button>
    </div>
  </nav>
</div>

<style>
  /* ========== ASTRO NATIVE CSS OPTIMIZATION - NO !IMPORTANT ========== */
  /* 
 * ARCHITECTURAL DECISION: Astro's scoped CSS provides natural specificity isolation
 * This eliminates the need for !important declarations while maintaining
 * component encapsulation and preventing style conflicts
 * 
 * PERFORMANCE CONSIDERATIONS:
 * - Scoped CSS reduces global style pollution
 * - CSS custom properties enable dynamic theming
 * - Container queries provide future-proof responsive design
 * - Optimized viewport units prevent scrollbar layout shifts
 * 
 * FUTURE EXTENSIBILITY:
 * - CSS custom properties allow easy theme switching
 * - Container queries enable component-level responsive design
 * - Safe area insets support modern mobile devices
 * - Progressive enhancement with fallbacks for older browsers
 */

  /* ---------- Component Root Variables - Integrated with Global System ---------- */
  .navbar-wrapper {
    /* REASONING: Single root element with proper layout flow */
    display: block;

    /* REASONING: Progressive enhancement with fallbacks for browser compatibility */
    width: 100vw; /* Fallback for older browsers */
    width: 100dvw; /* Dynamic viewport width - excludes scrollbars */

    /* REASONING: Safe area considerations using global variables */
    padding-left: var(--safe-area-left);
    padding-right: var(--safe-area-right);

    /* REASONING: Prevent horizontal overflow and ensure proper containment */
    max-width: 100%;
    overflow-x: hidden;
    box-sizing: border-box;
  }

  /* ---------- Integrated Design System Variables - Global Consistency ---------- */
  .navbar-wrapper {
    /* REASONING: Integrated glass morphism using global design system */
    --glass-bg: oklch(6% 0.008 270 / 0.12);
    --glass-border: oklch(25% 0.015 270 / 0.15);
    --glass-glow: oklch(65% 0.18 280 / 0.08);

    /* REASONING: Unified interactive states using global variables */
    --interactive-hover: oklch(98% 0.002 270 / 0.1);
    --interactive-focus: oklch(98% 0.002 270 / 0.15);
    --interactive-active: oklch(98% 0.002 270 / 0.2);

    /* REASONING: Brand elements using global design tokens */
    --brand-glow: oklch(65% 0.18 280 / 0.6);
    --brand-ruby: oklch(65% 0.008 270);
    --brand-ruby-hover: oklch(70% 0.12 280);

    --navbar-opacity: 1;
  }

  /* ---------- Main Navbar Container - Fixed Positioning with CSS Scroll Animation ---------- */
  .navbar {
    /* REASONING: Fixed positioning for persistent navigation */
    position: fixed;
    top: 0; /* Fallback for browsers without safe-area support */
    top: env(safe-area-inset-top, 0);
    left: 0;
    right: 0;
    z-index: 1000;

    /* REASONING: Responsive padding using REM units with safe area consideration */
    padding: 0.75rem 0; /* Fallback for browsers without safe-area support */
    padding-top: calc(0.75rem + env(safe-area-inset-top, 0));

    /* REASONING: CSS Scroll-driven Animation for opacity based on scroll */
    animation: navbarScrollOpacity linear;
    animation-timeline: scroll(root);
    animation-range: 0px 200px;

    /* REASONING: Optimized single glass morphism background */
    background:
      linear-gradient(
        135deg,
        var(--glass-bg) 0%,
        oklch(8% 0.01 270 / 0.08) 50%,
        var(--glass-bg) 100%
      ),
      radial-gradient(ellipse at 50% 0%, var(--glass-glow) 0%, transparent 60%);

    /* REASONING: Enhanced backdrop filters for glass effect */
    backdrop-filter: blur(12px) saturate(150%) brightness(1.05) contrast(1.05);
    -webkit-backdrop-filter: blur(12px) saturate(150%) brightness(1.05)
      contrast(1.02);

    /* REASONING: Optimized glass border styling */
    border: 1px solid var(--glass-border);
    border-radius: 0.75rem;

    /* REASONING: Unified transition system with GPU acceleration */
    transition:
      background 0.4s cubic-bezier(0.4, 0, 0.2, 1),
      backdrop-filter 0.4s cubic-bezier(0.4, 0, 0.2, 1),
      border-color 0.4s cubic-bezier(0.4, 0, 0.2, 1),
      transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);

    /* REASONING: GPU acceleration for smooth animations */
    will-change: background, backdrop-filter, border-color, transform;
    transform: translateZ(0);
  }

  /* ---------- Navigation Container - Flexbox Layout ---------- */
  .nav-container {
    /* REASONING: Centered container with responsive max-width */
    margin: 0 auto;
    max-width: 75rem;
    display: flex;
    align-items: center;
    justify-content: space-between;

    /* REASONING: Responsive padding using REM units */
    padding: 0 0;
    background: transparent;
  }

  /* ---------- SVG Icon System - Unified Styling ---------- */
  .nav-svg-icon {
    /* REASONING: Consistent icon styling with inheritance */
    color: inherit;
    stroke: currentColor;
    fill: none;

    /* REASONING: Flexible sizing with proper constraints */
    flex-shrink: 0;
    vertical-align: middle;
    width: 1em;
    height: 1em;
    max-width: 100%;
    max-height: 100%;

    /* REASONING: Unified transition system with GPU acceleration */
    transition:
      color var(--duration-fast) ease,
      transform var(--duration-fast) ease,
      opacity var(--duration-fast) ease;

    /* REASONING: GPU acceleration for icon animations */
    will-change: transform, opacity;
    transform: translateZ(0);
  }

  /* REASONING: Interactive states for SVG icons with GPU acceleration */
  .nav-svg-icon:hover {
    transform: translateZ(0) scale(1.05);
    opacity: 0.9;
  }

  .nav-svg-icon:active {
    transform: translateZ(0) scale(0.95);
    opacity: 0.8;
  }

  .nav-svg-icon:focus {
    outline: 2px solid var(--color-ring);
    outline-offset: 2px;
    border-radius: 2px;
  }

  /* ---------- Navigation Sections - Mobile First ---------- */
  .nav-left,
  .nav-right {
    /* REASONING: Hidden on mobile, shown on desktop */
    display: none;
    flex: 1 1 0%;
    align-items: center;
  }

  .nav-left {
    gap: 0.75rem;
  }

  .nav-right {
    justify-content: flex-end;
    gap: 0.5rem;
  }

  /* ---------- Navigation Items - Touch-Optimized Interactive Elements ---------- */
  .nav-item {
    /* REASONING: Touch-optimized accessible interactive elements */
    cursor: pointer;
    font-size: var(--navbar-item-size);
    color: var(--color-muted-foreground);

    /* REASONING: Touch target optimization - minimum 44px for accessibility */
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
    padding: var(--touch-target-padding) 0.75rem;
    border-radius: 0.375rem;
    outline: none;

    /* REASONING: Flexbox for proper touch target alignment */
    display: flex;
    align-items: center;
    justify-content: center;

    /* REASONING: Unified transition system with GPU acceleration */
    transition:
      color 0.12s ease,
      background-color 0.12s ease,
      transform 0.12s ease,
      box-shadow 0.12s ease;

    /* REASONING: GPU acceleration for navigation items */
    will-change: transform, background-color;
    transform: translateZ(0);
  }

  .nav-item:hover {
    color: var(--color-primary);
    background-color: var(--interactive-hover);
    transform: translateZ(0) translateY(-1px);
  }

  .nav-item:focus {
    outline: 2px solid var(--color-primary);
    outline-offset: 2px;
    background-color: var(--interactive-focus);
  }

  .nav-item:active {
    transform: translateZ(0) translateY(0);
    background-color: var(--interactive-active);
  }

  /* ---------- Mobile Menu Button - Enhanced Touch Optimization ---------- */
  .mobile-menu-btn {
    /* REASONING: Mobile-first button with enhanced touch targets */
    display: var(--navbar-mobile-display);
    align-items: center;
    justify-content: center;
    gap: 0.25rem;

    /* REASONING: Touch target optimization - minimum 44px for accessibility */
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);

    /* REASONING: Accessible button styling with enhanced touch feedback */
    cursor: pointer;
    border: none;
    border-radius: 20px;
    background-color: var(--color-primary);
    color: var(--color-primary-foreground);

    /* REASONING: Touch-optimized padding with proper spacing */
    padding: var(--touch-target-padding) 1rem;

    /* REASONING: Typography with accessibility scaling */
    font-size: 0.875rem;
    font-weight: 500;
    letter-spacing: 0.02em;

    /* REASONING: Unified transition system with GPU acceleration */
    transition:
      background-color 0.12s ease,
      transform 0.12s ease,
      box-shadow 0.12s ease;

    /* REASONING: GPU acceleration for mobile menu button */
    will-change: transform, background-color;
    transform: translateZ(0);

    /* REASONING: Touch-specific enhancements */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  .mobile-menu-btn:hover {
    background-color: var(--color-primary-dark);
    transform: translateZ(0) translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  .mobile-menu-btn:active {
    transform: translateZ(0) translateY(0);
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  /* ---------- Logo Component - Brand Identity ---------- */
  .logo-japanese {
    /* REASONING: Brand-consistent logo styling */
    cursor: pointer;
    font-size: 1.5rem;
    line-height: 1;
    text-decoration: none;
    font-family: var(--font-jp);
    color: var(--color-foreground);

    /* REASONING: Unified transition system with GPU acceleration */
    transition:
      transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      text-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      filter 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    /* REASONING: GPU acceleration for logo animations */
    will-change: transform, color, text-shadow, filter;
    transform: translateZ(0);

    /* REASONING: Initial state with subtle glow */
    text-shadow:
      0 0 0px var(--brand-glow),
      0 0 0px var(--brand-glow);
  }

  .logo-japanese:hover {
    /* REASONING: Lift effect with enhanced glow and GPU acceleration */
    transform: translateZ(0) translateY(-2px) scale(1.02);
    color: var(--color-primary);
    text-shadow:
      0 0 8px var(--brand-glow),
      0 0 16px var(--brand-glow),
      0 0 24px var(--brand-glow);
    filter: drop-shadow(0 0 8px var(--brand-glow));
  }

  /* ---------- Ruby Text Styling - Japanese Typography ---------- */
  .logo-japanese rt {
    /* REASONING: Precise ruby text positioning */
    margin-bottom: -15px;
    font-size: 0.4em;
    font-weight: 600;
    font-family: 'Inter', sans-serif;
    color: var(--brand-ruby);

    /* REASONING: Coordinated transitions with parent */
    transition:
      color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
      text-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);

    text-shadow: 0 0 0px var(--brand-glow);
  }

  .logo-japanese:hover rt {
    color: var(--brand-ruby-hover);
    text-shadow:
      0 0 4px var(--brand-glow),
      0 0 8px var(--brand-glow);
  }

  /* ---------- Get Started Buttons - Touch-Optimized Call to Action ---------- */
  .get-started-btn {
    /* REASONING: Touch-optimized button styling with accessibility */
    font-size: 0.875rem;
    font-weight: 500;
    cursor: pointer;
    border: none;
    color: var(--color-primary-foreground);
    background-color: var(--color-primary);
    border-radius: var(--border-radius-btn-small);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);

    /* REASONING: Touch target optimization - minimum 44px for accessibility */
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
    padding: var(--touch-target-padding) 1.15rem;

    /* REASONING: Flexbox for icon and text alignment */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;

    /* REASONING: Unified transition system with GPU acceleration */
    transition:
      background-color var(--animate-duration-slow) ease,
      box-shadow var(--animate-duration-normal) ease,
      transform var(--animate-duration-fast) ease,
      opacity var(--animate-duration-fast) ease;

    /* REASONING: GPU acceleration for get started buttons */
    will-change: transform, background-color, box-shadow;
    transform: translateZ(0);

    /* REASONING: Touch-specific enhancements */
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }

  .get-started-btn:hover {
    background-color: var(--color-primary-dark);
    box-shadow:
      0 8px 25px rgba(0, 0, 0, 0.2),
      0 4px 12px rgba(0, 0, 0, 0.15);
    transform: translateZ(0) translateY(-1px);
  }

  .get-started-btn:active {
    transform: translateZ(0) translateY(0);
    opacity: 0.98;
  }

  /* ---------- Safe CSS Viewport Units - Stable Implementation ---------- */
  .navbar-wrapper {
    /* REASONING: Mobile-first responsive values as CSS custom properties */
    --navbar-padding-y: 0.75rem;
    --navbar-padding-x: 0;
    --navbar-gap-left: 0.75rem;
    --navbar-gap-right: 0.5rem;
    --navbar-item-size: 0.75rem;
    --navbar-logo-size: 1.5rem;
    --navbar-nav-display: none;
    --navbar-mobile-display: flex;

    /* REASONING: Safe viewport units - using stable 100vw/100vh */
    --navbar-width: 100vw;
    --navbar-height: 100vh;

    /* REASONING: Container query setup for responsive design */
    container-type: inline-size;
    container-name: navbar;
  }

  /* ---------- Tablet Breakpoint (768px+) - Enhanced Mobile Experience ---------- */
  @media (min-width: 768px) {
    .navbar-wrapper {
      --navbar-padding-y: 1rem;
      --navbar-padding-x: 0;
      --navbar-gap-left: 1.5rem;
      --navbar-gap-right: 1rem;
      --navbar-item-size: 0.875rem;
      --navbar-logo-size: 1.75rem;
    }
  }

  /* ---------- Desktop Breakpoint (1024px+) - Full Navigation ---------- */
  @media (min-width: 1024px) {
    .navbar-wrapper {
      --navbar-nav-display: flex;
      --navbar-mobile-display: none;
      --navbar-padding-x: 0;
      --navbar-gap-left: 2.5rem;
      --navbar-gap-right: 1.5rem;
      --navbar-item-size: 0.875rem;
      --navbar-logo-size: 1.85rem;
    }
  }

  /* ---------- Container Queries - Modern Responsive Design ---------- */
  @container navbar (min-width: 768px) {
    .navbar-wrapper {
      --navbar-container-optimized: true;
      --navbar-padding-y: 1rem;
      --navbar-padding-x: 0;
      --navbar-gap-left: 1.5rem;
      --navbar-gap-right: 1rem;
      --navbar-item-size: 0.875rem;
      --navbar-logo-size: 1.75rem;
    }
  }

  @container navbar (min-width: 1024px) {
    .navbar-wrapper {
      --navbar-container-large: true;
      --navbar-nav-display: flex;
      --navbar-mobile-display: none;
      --navbar-padding-x: 0;
      --navbar-gap-left: 2.5rem;
      --navbar-gap-right: 1.5rem;
      --navbar-item-size: 0.875rem;
      --navbar-logo-size: 1.85rem;
    }
  }

  /* ---------- Apply Safe Responsive Variables ---------- */
  .navbar {
    padding: var(--navbar-padding-y);
    /* REASONING: Apply safe viewport width to navbar */
    width: var(--navbar-width);

    /* REASONING: Safe area positioning using global variables */
    top: var(--safe-area-top);
    left: var(--safe-area-left);
    right: var(--safe-area-right);
  }

  .nav-container {
    /* REASONING: Safe area padding using global variables */
    padding-left: calc(var(--navbar-padding-x) + var(--safe-area-left));
    padding-right: calc(var(--navbar-padding-x) + var(--safe-area-right));
    padding-top: 0;
    padding-bottom: 0;
  }

  .nav-left,
  .nav-right {
    display: var(--navbar-nav-display);
    flex: 1 1 0%;
    align-items: center;
  }

  .nav-left {
    gap: var(--navbar-gap-left);
  }

  .nav-right {
    justify-content: flex-end;
    gap: var(--navbar-gap-right);
  }

  .nav-item {
    font-size: var(--navbar-item-size);
  }

  .logo-japanese {
    font-size: var(--navbar-logo-size);
  }

  .mobile-menu-btn {
    display: var(--navbar-mobile-display);
  }

  /* ---------- Container Query Support - Modern Responsive Design ---------- */
  @supports (container-type: inline-size) {
    .navbar-wrapper {
      container-type: inline-size;
      container-name: navbar;
    }
  }

  /* ---------- CSS Scroll-driven Animations - No JavaScript Required ---------- */
  @keyframes navbarScrollOpacity {
    from {
      /* REASONING: Initial state - transparent background */
      background:
        linear-gradient(
          135deg,
          oklch(6% 0.008 270 / 0) 0%,
          oklch(8% 0.01 270 / 0) 50%,
          oklch(6% 0.008 270 / 0) 100%
        ),
        radial-gradient(
          ellipse at 50% 0%,
          oklch(65% 0.18 280 / 0) 0%,
          transparent 60%
        );
      backdrop-filter: blur(0px) saturate(100%) brightness(1) contrast(1);
      -webkit-backdrop-filter: blur(0px) saturate(100%) brightness(1)
        contrast(1);
      border-color: oklch(25% 0.015 270 / 0);
    }
    to {
      /* REASONING: Final state - full glass morphism effect */
      background:
        linear-gradient(
          135deg,
          var(--glass-bg) 0%,
          oklch(8% 0.01 270 / 0.08) 50%,
          var(--glass-bg) 100%
        ),
        radial-gradient(
          ellipse at 50% 0%,
          var(--glass-glow) 0%,
          transparent 60%
        );
      backdrop-filter: blur(12px) saturate(150%) brightness(1.05) contrast(1.05);
      -webkit-backdrop-filter: blur(12px) saturate(150%) brightness(1.05)
        contrast(1.02);
      border-color: var(--glass-border);
    }
  }

  /* ---------- Fallback for browsers without Scroll-driven Animations ---------- */
  @supports not (animation-timeline: scroll(root)) {
    .navbar {
      /* REASONING: Fallback - use CSS custom property for JavaScript control */
      background:
        linear-gradient(
          135deg,
          oklch(6% 0.008 270 / var(--navbar-opacity, 0.12)) 0%,
          oklch(8% 0.01 270 / calc(var(--navbar-opacity, 0.12) * 0.67)) 50%,
          oklch(6% 0.008 270 / var(--navbar-opacity, 0.12)) 100%
        ),
        radial-gradient(
          ellipse at 50% 0%,
          oklch(65% 0.18 280 / calc(var(--navbar-opacity, 0.12) * 0.67)) 0%,
          transparent 60%
        );
      backdrop-filter: blur(calc(var(--navbar-opacity, 0.12) * 100px))
        saturate(calc(100% + var(--navbar-opacity, 0.12) * 50%))
        brightness(calc(1 + var(--navbar-opacity, 0.12) * 0.05))
        contrast(calc(1 + var(--navbar-opacity, 0.12) * 0.05));
      -webkit-backdrop-filter: blur(calc(var(--navbar-opacity, 0.12) * 100px))
        saturate(calc(100% + var(--navbar-opacity, 0.12) * 50%))
        brightness(calc(1 + var(--navbar-opacity, 0.12) * 0.05))
        contrast(calc(1 + var(--navbar-opacity, 0.12) * 0.02));
      border-color: oklch(
        25% 0.015 270 / calc(var(--navbar-opacity, 0.12) * 1.25)
      );
    }
  }

  /* ---------- Safe Viewport Units Support - Removed Problematic Units ---------- */
  /* REASONING: Removed modern viewport units that were causing display issues */
  /* Using stable 100vw/100vh for consistent cross-browser compatibility */
</style>

<script>
  // ========== ASTRO-NATIVE JAVASCRIPT - MINIMAL AND PERFORMANT ==========
  // REASONING: Following Astro's zero-JavaScript philosophy with minimal interactivity
  // KISS Principle: Simple, focused functions under 5 lines each

  /**
   * Navigation configuration - matches Astro component data
   */
  const NAV_ROUTES = {
    resources: { path: '/docs', label: 'Resources' },
    posts: { path: '/docs', label: 'Posts' },
    tools: { path: '/tools', label: 'Tools' },
    panduan: { path: '/docs', label: 'Panduan' },
  };

  /**
   * Open Discord invitation - 3-line function following KISS principle
   */
  function openInvitationModal() {
    window.open('https://discord.gg/j8qmYPAGQh', '_blank');
  }

  /**
   * Generic navigation function - 3-line function following KISS principle
   */
  function navigateTo(routeKey) {
    const route = NAV_ROUTES[routeKey];
    if (route) window.location.href = route.path;
  }

  /**
   * Context-aware action handler - 5-line function with conditional logic
   */
  function handleGetStartedAction() {
    const isHomepage =
      window.location.pathname === '/' ||
      window.location.pathname === '/index.html';
    if (isHomepage) scrollToMission();
    else window.open('https://discord.gg/j8qmYPAGQh', '_blank');
  }

  /**
   * Scroll to mission section with retry logic - 5-line function with DOM ready check
   */
  function scrollToMission() {
    const missionSection = document.getElementById('mission');
    if (!missionSection) {
      setTimeout(scrollToMission, 100);
      return;
    }

    const navbarHeight =
      (document.querySelector('.navbar') as HTMLElement)?.offsetHeight || 0;
    const scrollToPosition = Math.max(
      0,
      missionSection.getBoundingClientRect().top +
        window.pageYOffset -
        navbarHeight -
        40
    );
    window.scrollTo({ top: scrollToPosition, behavior: 'smooth' });
  }

  /**
   * Event delegation for efficient event handling
   */
  function handleNavbarClick(event) {
    const target = event.target.closest('[data-route], [data-action]');
    if (!target) return;

    const route = target.dataset.route;
    const action = target.dataset.action;

    if (route) {
      navigateTo(route);
    } else if (action === 'discord') {
      openInvitationModal();
    } else if (action === 'metodologi') {
      navigateTo('posts');
    } else if (action === 'get-started') {
      handleGetStartedAction();
    }
  }

  /**
   * Keyboard navigation support
   */
  function handleNavbarKeydown(event) {
    if (event.key === 'Enter' || event.key === ' ') {
      event.preventDefault();
      handleNavbarClick(event);
    }
  }

  /**
   * Initialize navbar functionality
   */
  function initNavbar() {
    // Event delegation for efficient event handling
    document.addEventListener('click', handleNavbarClick);
    document.addEventListener('keydown', handleNavbarKeydown);
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNavbar);
  } else {
    initNavbar();
  }
</script>
