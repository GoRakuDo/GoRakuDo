---
// Navbar.astro - Astro Native Navigation Component
// GoRakuDo Engineering Team 2025 - Astro + Tailwind v4.1
// ARCHITECTURAL DECISION: Astro-native approach with zero JavaScript by default
// PERFORMANCE: CSS-only scroll animations, minimal JavaScript for interactivity

// ========== ASTRO-NATIVE PROPS INTERFACE ==========
export interface Props {
  // KISS Principle: Essential props only
  className?: string;
}

// ========== ASTRO-NATIVE DEFAULT PROPS ==========
const { className = '' } = Astro.props;

// ========== NAVIGATION CONFIGURATION ==========
// REASONING: Centralized route management following DRY principle
const NAV_ROUTES = {
  'Doc-Penjelasan': { path: '/docs', label: 'Doc-Penjelasan' },
} as const;

// ========== ASTRO-NATIVE NAVIGATION ITEMS ==========
const navItems = Object.entries(NAV_ROUTES).map(([key, route]) => ({
  key,
  ...route,
}));
---

<div class={`navbar-wrapper ${className}`}>
  <nav class='navbar'>
    <div class='nav-container'>
      <!-- Left Navigation - Desktop Only -->
      <div class='nav-left'>
        <button class='nav-item nav-menu-btn' data-action='menu'>
          <svg
            class='nav-svg-icon'
            width='16'
            height='16'
            viewBox='0 0 24 24'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
            aria-hidden='true'
          >
            <rect
              width='18'
              height='18'
              x='3'
              y='3'
              rx='2'
              stroke='currentColor'
              stroke-width='2'
              stroke-linecap='round'
              stroke-linejoin='round'></rect>
            <path
              d='M3 9h18'
              stroke='currentColor'
              stroke-width='2'
              stroke-linecap='round'
              stroke-linejoin='round'></path>
            <path
              d='m9 16 3-3 3 3'
              stroke='currentColor'
              stroke-width='2'
              stroke-linecap='round'
              stroke-linejoin='round'></path>
          </svg>
          Menu
        </button>
        {
          navItems.map(item => (
            <a
              href={item.path}
              class='nav-item'
              data-route={item.key}
              data-path={item.path}
            >
              <svg
                class='nav-svg-icon'
                width='16'
                height='16'
                viewBox='0 0 24 24'
                fill='none'
                xmlns='http://www.w3.org/2000/svg'
                aria-hidden='true'
              >
                <path
                  d='M18 8c0 3.613-3.869 7.429-5.393 8.795a1 1 0 0 1-1.214 0C9.87 15.429 6 11.613 6 8a6 6 0 0 1 12 0'
                  stroke='currentColor'
                  stroke-width='2'
                  stroke-linecap='round'
                  stroke-linejoin='round'
                />
                <circle
                  cx='12'
                  cy='8'
                  r='2'
                  stroke='currentColor'
                  stroke-width='2'
                  stroke-linecap='round'
                  stroke-linejoin='round'
                />
                <path
                  d='M8.714 14h-3.71a1 1 0 0 0-.948.683l-2.004 6A1 1 0 0 0 3 22h18a1 1 0 0 0 .948-1.316l-2-6a1 1 0 0 0-.949-.684h-3.712'
                  stroke='currentColor'
                  stroke-width='2'
                  stroke-linecap='round'
                  stroke-linejoin='round'
                />
              </svg>
              {item.label}
            </a>
          ))
        }
      </div>

      <!-- Center Logo -->
      <div class='nav-center'>
        <a href='/' class='logo-japanese' title='GoRakuDo'> 語楽道 </a>
      </div>

      <!-- Right Actions - Desktop Only -->
      <div class='nav-right'>
        <button class='get-started-btn' data-action='metodologi'>
          <svg
            class='nav-svg-icon'
            width='16'
            height='16'
            viewBox='0 0 24 24'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
            aria-hidden='true'
          >
            <path
              d='M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z'
              stroke-width='2'
              stroke-linecap='round'
              stroke-linejoin='round'></path>
          </svg>
          Panduan
        </button>
        <button class='get-started-btn' data-action='get-started'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            width='16'
            height='16'
            viewBox='0 0 24 24'
            class='nav-svg-icon lucide lucide-gamepad2-icon lucide-gamepad-2'
            aria-hidden='true'
          >
            <line x1='6' x2='10' y1='11' y2='11'></line>
            <line x1='8' x2='8' y1='9' y2='13'></line>
            <line x1='15' x2='15.01' y1='12' y2='12'></line>
            <line x1='18' x2='18.01' y1='10' y2='10'></line>
            <path
              d='M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z'
              stroke-width='2'
              stroke-linecap='round'
              stroke-linejoin='round'></path>
          </svg>
          Mulai Sekarang
        </button>
      </div>

      <!-- Mobile Menu Button -->
      <button class='mobile-menu-btn' data-action='discord'>
        <svg
          xmlns='http://www.w3.org/2000/svg'
          width='16'
          height='16'
          viewBox='0 0 24 24'
          class='nav-svg-icon lucide lucide-gamepad2-icon lucide-gamepad-2'
          aria-hidden='true'
        >
          <line x1='6' x2='10' y1='11' y2='11'></line>
          <line x1='8' x2='8' y1='9' y2='13'></line>
          <line x1='15' x2='15.01' y1='12' y2='12'></line>
          <line x1='18' x2='18.01' y1='10' y2='10'></line>
          <path
            d='M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z'
            stroke-width='2'
            stroke-linecap='round'
            stroke-linejoin='round'></path>
        </svg>
        Join
      </button>
    </div>
  </nav>
</div>

<style is:global>
  /* ========== ASTRO NATIVE CSS OPTIMIZATION - NO !IMPORTANT ========== */

  /* 
 * ARCHITECTURAL DECISION: Astro's scoped CSS provides natural specificity isolation
 * This eliminates the need for !important declarations while maintaining
 * component encapsulation and preventing style conflicts
 * 
 * PERFORMANCE CONSIDERATIONS:
 * - Scoped CSS reduces global style pollution
 * - CSS custom properties enable dynamic theming
 * - Container queries provide future-proof responsive design
 * - Optimized viewport units prevent scrollbar layout shifts
 * 
 * FUTURE EXTENSIBILITY:
 * - CSS custom properties enable dynamic styling
 * - Container queries enable component-level responsive design
 * - Safe area insets support modern mobile devices
 * - Progressive enhancement with fallbacks for older browsers
 */

  /* ===== DESIGN TOKENS - MODERN REDESIGN ===== */
  .navbar-wrapper {
    /* REASONING: Single root element with proper layout flow */
    display: block;
    overflow-x: hidden;

    /* Modern Color Tokens - Enhanced OKLCH palette */
    --navbar-white: oklch(100% 0 0deg);
    --navbar-white-05: oklch(100% 0 0deg / 0.05);
    --navbar-white-08: oklch(100% 0 0deg / 0.08);
    --navbar-white-10: oklch(100% 0 0deg / 0.1);
    --navbar-white-15: oklch(100% 0 0deg / 0.15);
    --navbar-white-20: oklch(100% 0 0deg / 0.2);
    --navbar-white-25: oklch(100% 0 0deg / 0.25);
    --navbar-black: oklch(0% 0 0deg);
    --navbar-black-05: oklch(0% 0 0deg / 0.05);
    --navbar-black-10: oklch(0% 0 0deg / 0.1);
    --navbar-black-15: oklch(0% 0 0deg / 0.15);
    --navbar-black-6: oklch(6% 0.008 270deg);
    --navbar-black-8: oklch(8% 0.01 270deg);
    --navbar-black-25: oklch(25% 0.015 270deg);

    /* Enhanced Primary Colors - Modern Gradient Palette */
    --navbar-primary: oklch(65% 0.25 280deg);
    --navbar-primary-dark: oklch(60% 0.25 280deg);
    --navbar-primary-light: oklch(70% 0.18 280deg);
    --navbar-primary-18: oklch(65% 0.18 280deg);
    --navbar-primary-25: oklch(65% 0.25 280deg / 0.25);
    --navbar-primary-30: oklch(65% 0.25 280deg / 0.3);
    --navbar-primary-70: oklch(70% 0.12 280deg);

    /* Secondary Accent Colors */
    --navbar-accent-orange: oklch(65% 0.18 15deg);
    --navbar-accent-blue: oklch(65% 0.25 280deg);
    --navbar-accent-green: oklch(70% 0.15 45deg);

    /* Enhanced Text Colors */
    --navbar-text-primary: oklch(98% 0.002 270deg);
    --navbar-text-secondary: oklch(85% 0.002 270deg);
    --navbar-text-muted: oklch(75% 0.002 270deg);

    /* GlassMorphism Tokens */
    --navbar-glass-bg: oklch(6% 0.008 270deg / 0.12);
    --navbar-glass-bg-8: oklch(8% 0.01 270deg / 0.08);
    --navbar-glass-border: oklch(25% 0.015 270deg / 0.15);
    --navbar-glass-glow: oklch(65% 0.18 280deg / 0.08);
    --navbar-glass-glow-60: oklch(65% 0.18 280deg / 0.6);

    /* Interactive State Tokens */
    --navbar-interactive-hover: oklch(98% 0.002 270deg / 0.1);
    --navbar-interactive-focus: oklch(98% 0.002 270deg / 0.15);
    --navbar-interactive-active: oklch(98% 0.002 270deg / 0.2);

    /* Brand Tokens */
    --navbar-brand-glow: oklch(65% 0.18 280deg / 0.6);
    --navbar-brand-ruby: oklch(65% 0.008 270deg);
    --navbar-brand-ruby-hover: oklch(70% 0.12 280deg);

    /* Spacing Tokens */
    --navbar-padding-y: 0.75rem;
    --navbar-padding-x: 0;
    --navbar-gap-left: 0.5rem;
    --navbar-gap-right: 0.5rem;
    --navbar-gap-small: 0.25rem;
    --navbar-gap-medium: 1rem;
    --navbar-gap-large: 1.5rem;
    --navbar-gap-xl: 2.5rem;
    --navbar-padding-btn: 1.15rem;

    /* Typography Tokens */
    --navbar-item-size: 0.75rem;
    --navbar-item-size-md: 0.875rem;
    --navbar-logo-size: 1.85rem;
    --navbar-logo-size-md: 2.15rem;
    --navbar-logo-size-lg: 2.35rem;

    /* Border Radius Tokens */
    --navbar-radius-sm: 0.375rem;
    --navbar-radius-md: 0.75rem;
    --navbar-radius-lg: 1.25rem;
    --navbar-radius-btn: var(--border-radius-btn-small);

    /* Display Tokens */
    --navbar-nav-display: none;
    --navbar-mobile-display: flex;
    --navbar-opacity: 1;

    /* Viewport Tokens */
    --navbar-width: 100vw;
    --navbar-height: 100vh;

    /* Backdrop Filter Tokens */
    --navbar-blur-base: blur(12px) saturate(150%) brightness(1.05)
      contrast(1.05);
    --navbar-blur-transparent: blur(0) saturate(100%) brightness(1) contrast(1);

    /* REASONING: Progressive enhancement with fallbacks for browser compatibility */
    width: 100dvw;

    /* REASONING: Prevent horizontal overflow and ensure proper containment */
    max-width: 100%;
    padding-right: var(--safe-area-right);

    /* REASONING: Safe area considerations using global variables */
    padding-left: var(--safe-area-left);
    box-sizing: border-box;

    /* REASONING: Container query setup for responsive design */
    container-name: navbar;
    container-type: inline-size;

    @media (min-width: 768px) {
      --navbar-padding-y: var(--navbar-gap-medium);
      --navbar-padding-x: 0;
      --navbar-gap-left: var(--navbar-gap-medium);
      --navbar-gap-right: var(--navbar-gap-medium);
      --navbar-item-size: var(--navbar-item-size-md);
      --navbar-logo-size: var(--navbar-logo-size-md);
    }

    @media (min-width: 1024px) {
      --navbar-nav-display: flex;
      --navbar-mobile-display: none;
      --navbar-padding-x: 0;
      --navbar-gap-left: var(--navbar-gap-large);
      --navbar-gap-right: var(--navbar-gap-large);
      --navbar-item-size: var(--navbar-item-size-md);
      --navbar-logo-size: var(--navbar-logo-size-lg);
    }

    @container navbar (min-width: 768px) {
      --navbar-container-optimized: true;
      --navbar-padding-y: var(--navbar-gap-medium);
      --navbar-padding-x: 0;
      --navbar-gap-left: var(--navbar-gap-medium);
      --navbar-gap-right: var(--navbar-gap-medium);
      --navbar-item-size: var(--navbar-item-size-md);
      --navbar-logo-size: var(--navbar-logo-size-md);
    }

    @container navbar (min-width: 1024px) {
      --navbar-container-large: true;
      --navbar-nav-display: flex;
      --navbar-mobile-display: none;
      --navbar-padding-x: 0;
      --navbar-gap-left: var(--navbar-gap-large);
      --navbar-gap-right: var(--navbar-gap-large);
      --navbar-item-size: var(--navbar-item-size-md);
      --navbar-logo-size: var(--navbar-logo-size-lg);
    }

    @supports (container-type: inline-size) {
      container-name: navbar;
      container-type: inline-size;
    }

    /* ---------- Main Navbar Container - Modern Redesign with Enhanced GlassMorphism ---------- */
    .navbar {
      /* REASONING: Fixed positioning for persistent navigation */
      position: fixed;
      top: var(--safe-area-top);
      right: var(--safe-area-right);
      left: var(--safe-area-left);
      z-index: var(--z-Navbar-navbar);

      /* REASONING: Apply safe viewport width to navbar */
      width: var(--navbar-width);
      padding: var(--navbar-padding-y);

      /* REASONING: Enhanced glass border styling with gradient */
      border: none;
      border-radius: 0 0 var(--navbar-radius-lg) var(--navbar-radius-lg);

      /* REASONING: Enhanced glass morphism background with multiple layers */
      background:
        linear-gradient(
          135deg,
          oklch(6% 0.008 270deg / 0.15) 0%,
          oklch(8% 0.01 270deg / 0.12) 25%,
          oklch(6% 0.008 270deg / 0.18) 50%,
          oklch(8% 0.01 270deg / 0.12) 75%,
          oklch(6% 0.008 270deg / 0.15) 100%
        ),
        radial-gradient(
          ellipse at 50% 0%,
          oklch(65% 0.18 280deg / 0.12) 0%,
          transparent 70%
        ),
        radial-gradient(
          ellipse at 0% 50%,
          oklch(65% 0.18 15deg / 0.08) 0%,
          transparent 50%
        ),
        radial-gradient(
          ellipse at 100% 50%,
          oklch(70% 0.15 45deg / 0.08) 0%,
          transparent 50%
        );
      transform: translateZ(0);

      /* REASONING: Enhanced transition system with modern easing */
      transition:
        background 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        backdrop-filter 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94),
        box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);

      /* REASONING: CSS Scroll-driven Animation for enhanced opacity */
      animation: navbarScrollOpacityEnhanced linear;

      /* REASONING: Enhanced backdrop filters for superior glass effect */
      backdrop-filter: blur(20px) saturate(180%) brightness(1.1) contrast(1.1);

      /* REASONING: Enhanced shadow system */
      box-shadow:
        0 8px 32px oklch(0% 0 0deg / 0.12),
        0 4px 16px oklch(0% 0 0deg / 0.08),
        inset 0 1px 0 oklch(100% 0 0deg / 0.1),
        inset 0 -1px 0 oklch(0% 0 0deg / 0.1);

      /* REASONING: GPU acceleration for smooth animations */
      will-change:
        background, backdrop-filter, border-color, transform, box-shadow;
      animation-timeline: scroll(root);
      animation-range: 0 200px;
    }

    /* ---------- Navigation Container - Flexbox Layout ---------- */
    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 75rem;

      /* REASONING: Centered container with responsive max-width */
      margin: 0 auto;

      /* REASONING: Safe area padding using global variables */
      padding: 0 calc(var(--navbar-padding-x) + var(--safe-area-right)) 0
        calc(var(--navbar-padding-x) + var(--safe-area-left));
      background: transparent;
    }

    /* ---------- SVG Icon System - Unified Styling ---------- */
    .nav-svg-icon {
      flex-shrink: 0;
      width: 1em;
      max-width: 100%;
      height: 1em;
      max-height: 100%;
      vertical-align: middle;
      color: inherit;
      fill: none;
      stroke: currentColor;
      transform: translateZ(0);
      transition:
        color var(--duration-fast) ease,
        transform var(--duration-fast) ease,
        opacity var(--duration-fast) ease;
      will-change: transform, opacity;
    }

    .nav-svg-icon:hover {
      opacity: 0.9;
      transform: translateZ(0) scale(1.05);
    }

    .nav-svg-icon:active {
      opacity: 0.8;
      transform: translateZ(0) scale(0.95);
    }

    /* ---------- Navigation Sections - Mobile First ---------- */
    .nav-left,
    .nav-right {
      /* REASONING: Hidden on mobile, shown on desktop */
      display: var(--navbar-nav-display);
      flex: 1 1 0%;
      align-items: center;
    }

    .nav-left {
      gap: var(--navbar-gap-left);
    }

    .nav-right {
      justify-content: flex-end;
      gap: var(--navbar-gap-right);
    }

    /* ---------- Navigation Items - Touch-Optimized Interactive Elements ---------- */
    .nav-item {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      min-width: var(--touch-target-min);
      min-height: var(--touch-target-min);
      padding: var(--touch-target-padding) var(--navbar-gap-left);
      border: 1px solid oklch(100% 0 0deg / 0.15);
      border-radius: var(--navbar-radius-lg);
      background: oklch(100% 0 0deg / 0.12);
      color: oklch(95% 0.01 60deg);
      font-size: var(--navbar-item-size);
      font-weight: 600;
      text-decoration: none;
      letter-spacing: 0.025em;
      cursor: pointer;
      transform: none;
      transition:
        color 0.12s ease,
        background-color 0.12s ease,
        transform 0.12s ease,
        box-shadow 0.12s ease,
        text-shadow 0.12s ease;
      outline: none;
      will-change: background-color, color;
      text-shadow:
        0 1px 2px oklch(0% 0 0deg / 0.4),
        0 0 8px oklch(90% 0.02 60deg / 0.3);
      backdrop-filter: blur(4px);
    }

    .nav-item:hover {
      background: oklch(100% 0 0deg / 0.18);
      color: oklch(95% 0.01 50deg);
      transform: translateY(-1px);
      text-shadow:
        0 2px 4px oklch(0% 0 0deg / 0.5),
        0 0 12px oklch(95% 0.01 50deg / 0.4);
      border-color: oklch(100% 0 0deg / 0.25);
      box-shadow:
        0 4px 12px oklch(0% 0 0deg / 0.15),
        0 2px 6px oklch(0% 0 0deg / 0.1);
    }

    .nav-item:active {
      background: oklch(100% 0 0deg / 0.22);
      color: oklch(98% 0.005 45deg);
      transform: translateY(0);
      text-shadow:
        0 1px 2px oklch(0% 0 0deg / 0.6),
        0 0 8px oklch(98% 0.005 45deg / 0.5);
      border-color: oklch(100% 0 0deg / 0.3);
      box-shadow:
        0 2px 6px oklch(0% 0 0deg / 0.2),
        inset 0 1px 2px oklch(100% 0 0deg / 0.1);
    }

    /* ---------- Mobile Menu Button - Modern Redesign with Enhanced Styling ---------- */
    .mobile-menu-btn {
      position: relative;
      display: var(--navbar-mobile-display);
      justify-content: center;
      align-items: center;
      gap: var(--navbar-gap-small);
      overflow: hidden;
      min-width: var(--touch-target-min);
      min-height: var(--touch-target-min);
      padding: var(--touch-target-padding) var(--navbar-gap-medium);
      border: none;
      border-radius: var(--navbar-radius-lg);
      background:
        linear-gradient(var(--navbar-primary), var(--navbar-primary))
          padding-box,
        linear-gradient(
            135deg,
            var(--navbar-accent-orange) 0%,
            var(--navbar-accent-blue) 50%,
            var(--navbar-accent-green) 100%
          )
          border-box;
      color: var(--navbar-text-primary);
      font-size: var(--navbar-item-size-md);
      font-weight: 600;
      letter-spacing: 0.02em;
      cursor: pointer;
      transform: translateZ(0);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      touch-action: manipulation;
      box-shadow:
        0 4px 16px oklch(65% 0.25 280deg / 0.2),
        0 2px 8px oklch(0% 0 0deg / 0.1),
        inset 0 1px 0 oklch(100% 0 0deg / 0.1);
      will-change: transform, background, box-shadow, filter;
      -webkit-tap-highlight-color: transparent;
      filter: drop-shadow(0 0 8px oklch(65% 0.25 280deg / 0.3));
    }

    .mobile-menu-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(
        135deg,
        oklch(100% 0 0deg / 0.1) 0%,
        transparent 50%,
        oklch(100% 0 0deg / 0.05) 100%
      );
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .mobile-menu-btn:hover {
      background:
        linear-gradient(
            var(--navbar-primary-light),
            var(--navbar-primary-light)
          )
          padding-box,
        linear-gradient(
            135deg,
            var(--navbar-accent-orange) 0%,
            var(--navbar-accent-blue) 50%,
            var(--navbar-accent-green) 100%
          )
          border-box;
      box-shadow:
        0 8px 32px oklch(65% 0.25 280deg / 0.3),
        0 4px 16px oklch(0% 0 0deg / 0.15),
        inset 0 1px 0 oklch(100% 0 0deg / 0.2);
      transform: translateZ(0) translateY(-2px) scale(1.02);
      filter: drop-shadow(0 0 16px oklch(65% 0.25 280deg / 0.4));
    }

    .mobile-menu-btn:active {
      transform: translateZ(0) translateY(0) scale(0.98);
      box-shadow:
        0 2px 8px oklch(65% 0.25 280deg / 0.2),
        0 1px 4px oklch(0% 0 0deg / 0.1);
      filter: drop-shadow(0 0 4px oklch(65% 0.25 280deg / 0.2));
    }

    /* ---------- Logo Component - Brand Identity with Enhanced Readability ---------- */
    .logo-japanese {
      color: oklch(from var(--token-white-base) l c h);
      font-family: var(--font-jp);
      font-size: var(--navbar-logo-size);
      font-weight: 500;
      line-height: 1;
      text-decoration: none;
      letter-spacing: 0.005em;
      -webkit-text-stroke: 0.25px
        oklch(from var(--token-black-base) l c h / 0.4);

      /* text-stroke: 0.25px oklch(from var(--token-black-base) l c h / 0.4); Non-standard property removed */

      /* REASONING: Brand-consistent logo styling */
      cursor: pointer;
      transform: translateZ(0);

      /* REASONING: Unified transition system with GPU acceleration */
      transition:
        transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        text-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        filter 0.3s cubic-bezier(0.4, 0, 0.2, 1);

      /* REASONING: Enhanced readability with optimized shadow system */
      text-shadow:
        0 2px 4px oklch(from var(--token-black-base) l c h / 0.4),
        0 1px 2px oklch(from var(--token-black-base) l c h / 0.5),
        0 0 8px oklch(from var(--token-black-base) l c h / 0.3),
        0 0 16px oklch(from var(--token-purple-base) l c h / 0.2);

      /* REASONING: GPU acceleration for logo animations */
      will-change: transform, color, text-shadow, filter;

      @media (min-width: 1024px) {
        color: oklch(from var(--token-white-base) l c h);
        font-weight: 450;
        -webkit-text-stroke: 0.25px
          oklch(from var(--token-black-base) l c h / 0.5);

        /* text-stroke: 0.25px oklch(from var(--token-black-base) l c h / 0.5); Non-standard property removed */
        text-shadow:
          0 3px 6px oklch(from var(--token-black-base) l c h / 0.5),
          0 1px 3px oklch(from var(--token-black-base) l c h / 0.6),
          0 0 12px oklch(from var(--token-black-base) l c h / 0.4),
          0 0 20px oklch(from var(--token-white-base) l c h / 0.3);
      }
    }

    .logo-japanese:hover {
      color: oklch(from var(--token-white-base) l c h);
      -webkit-text-stroke: 0.25px
        oklch(from var(--token-black-base) l c h / 0.6);

      /* text-stroke: 0.25px oklch(from var(--token-black-base) l c h / 0.6); Non-standard property removed */
      text-shadow:
        0 4px 8px oklch(from var(--token-black-base) l c h / 0.6),
        0 2px 4px oklch(from var(--token-black-base) l c h / 0.7),
        0 0 16px oklch(from var(--token-black-base) l c h / 0.5),
        0 0 24px oklch(from var(--token-purple-base) l c h / 0.4),
        0 0 32px oklch(from var(--token-purple-base) l c h / 0.3);
      filter: drop-shadow(
        0 0 12px oklch(from var(--token-purple-base) l c h / 0.4)
      );
      transform: translateZ(0) translateY(-2px) scale(1.02);
    }

    /* ---------- Ruby Text Styling - Japanese Typography with Enhanced Readability ---------- */
    .logo-japanese rt {
      margin-bottom: -15px;
      color: oklch(from var(--token-white-base) l c h / 0.8);
      font-family: Inter, sans-serif;
      font-size: 0.4em;
      font-weight: 350;
      -webkit-text-stroke: 0.25px
        oklch(from var(--token-black-base) l c h / 0.3);

      /* text-stroke: 0.25px oklch(from var(--token-black-base) l c h / 0.3); Non-standard property removed */
      transition:
        color 0.3s cubic-bezier(0.4, 0, 0.2, 1),
        text-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-shadow:
        0 1px 2px oklch(from var(--token-black-base) l c h / 0.5),
        0 0 4px oklch(from var(--token-black-base) l c h / 0.3),
        0 0 8px oklch(from var(--token-white-base) l c h / 0.2);
    }

    /* ---------- Get Started Buttons - Modern Redesign with Enhanced Styling ---------- */
    .get-started-btn {
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: var(--navbar-gap-small);
      overflow: hidden;
      min-width: var(--touch-target-min);
      min-height: var(--touch-target-min);
      padding: var(--touch-target-padding) var(--navbar-padding-btn);
      border: none;
      border-radius: var(--navbar-radius-lg);
      background:
        linear-gradient(var(--navbar-primary), var(--navbar-primary))
          padding-box,
        linear-gradient(
            135deg,
            var(--navbar-accent-orange) 0%,
            var(--navbar-accent-blue) 50%,
            var(--navbar-accent-green) 100%
          )
          border-box;
      color: var(--navbar-text-primary);
      font-size: var(--navbar-item-size-md);
      font-weight: 600;
      letter-spacing: 0.02em;
      cursor: pointer;
      transform: translateZ(0);
      transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      touch-action: manipulation;
      box-shadow:
        0 4px 16px oklch(65% 0.25 280deg / 0.2),
        0 2px 8px oklch(0% 0 0deg / 0.1),
        inset 0 1px 0 oklch(100% 0 0deg / 0.1);
      will-change: transform, background, box-shadow, filter;
      -webkit-tap-highlight-color: transparent;
      filter: drop-shadow(0 0 8px oklch(65% 0.25 280deg / 0.3));
    }

    .get-started-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(
        135deg,
        oklch(100% 0 0deg / 0.1) 0%,
        transparent 50%,
        oklch(100% 0 0deg / 0.05) 100%
      );
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .get-started-btn:hover {
      background:
        linear-gradient(
            var(--navbar-primary-light),
            var(--navbar-primary-light)
          )
          padding-box,
        linear-gradient(
            135deg,
            var(--navbar-accent-orange) 0%,
            var(--navbar-accent-blue) 50%,
            var(--navbar-accent-green) 100%
          )
          border-box;
      box-shadow:
        0 8px 32px oklch(65% 0.25 280deg / 0.3),
        0 4px 16px oklch(0% 0 0deg / 0.15),
        inset 0 1px 0 oklch(100% 0 0deg / 0.2);
      transform: translateZ(0) translateY(-2px) scale(1.02);
      filter: drop-shadow(0 0 16px oklch(65% 0.25 280deg / 0.4));
    }

    .get-started-btn:active {
      transform: translateZ(0) translateY(0) scale(0.98);
      box-shadow:
        0 2px 8px oklch(65% 0.25 280deg / 0.2),
        0 1px 4px oklch(0% 0 0deg / 0.1);
      filter: drop-shadow(0 0 4px oklch(65% 0.25 280deg / 0.2));
    }
  }

  /* ---------- CSS Scroll-driven Animations - Enhanced Modern Design ---------- */
  @keyframes navbarScrollOpacityEnhanced {
    0% {
      /* REASONING: Initial state - transparent background */
      background:
        linear-gradient(
          135deg,
          oklch(6% 0.008 270deg / 0) 0%,
          oklch(8% 0.01 270deg / 0) 25%,
          oklch(6% 0.008 270deg / 0) 50%,
          oklch(8% 0.01 270deg / 0) 75%,
          oklch(6% 0.008 270deg / 0) 100%
        ),
        radial-gradient(
          ellipse at 50% 0%,
          oklch(65% 0.18 280deg / 0) 0%,
          transparent 70%
        ),
        radial-gradient(
          ellipse at 0% 50%,
          oklch(65% 0.18 15deg / 0) 0%,
          transparent 50%
        ),
        radial-gradient(
          ellipse at 100% 50%,
          oklch(70% 0.15 45deg / 0) 0%,
          transparent 50%
        );
      border-color: transparent;
      backdrop-filter: blur(0) saturate(100%) brightness(1) contrast(1);
      box-shadow:
        0 0 0 oklch(0% 0 0deg / 0),
        0 0 0 oklch(0% 0 0deg / 0),
        inset 0 0 0 oklch(100% 0 0deg / 0),
        inset 0 0 0 oklch(0% 0 0deg / 0);
    }

    100% {
      /* REASONING: Final state - enhanced glass morphism effect */
      background:
        linear-gradient(
          135deg,
          oklch(6% 0.008 270deg / 0.15) 0%,
          oklch(8% 0.01 270deg / 0.12) 25%,
          oklch(6% 0.008 270deg / 0.18) 50%,
          oklch(8% 0.01 270deg / 0.12) 75%,
          oklch(6% 0.008 270deg / 0.15) 100%
        ),
        radial-gradient(
          ellipse at 50% 0%,
          oklch(65% 0.18 280deg / 0.12) 0%,
          transparent 70%
        ),
        radial-gradient(
          ellipse at 0% 50%,
          oklch(65% 0.18 15deg / 0.08) 0%,
          transparent 50%
        ),
        radial-gradient(
          ellipse at 100% 50%,
          oklch(70% 0.15 45deg / 0.08) 0%,
          transparent 50%
        );
      border-color: transparent;
      backdrop-filter: blur(20px) saturate(180%) brightness(1.1) contrast(1.1);
      box-shadow:
        0 8px 32px oklch(0% 0 0deg / 0.12),
        0 4px 16px oklch(0% 0 0deg / 0.08),
        inset 0 1px 0 oklch(100% 0 0deg / 0.1),
        inset 0 -1px 0 oklch(0% 0 0deg / 0.1);
    }
  }

  /* ---------- Fallback for browsers without Scroll-driven Animations ---------- */
  @supports not (animation-timeline: scroll(root)) {
    .navbar-wrapper .navbar {
      /* REASONING: Fallback - use CSS custom property for JavaScript control */
      background:
        linear-gradient(
          135deg,
          oklch(6% 0.008 270deg / var(--navbar-opacity, 0.12)) 0%,
          oklch(8% 0.01 270deg / calc(var(--navbar-opacity, 0.12) * 0.67)) 50%,
          oklch(6% 0.008 270deg / var(--navbar-opacity, 0.12)) 100%
        ),
        radial-gradient(
          ellipse at 50% 0%,
          oklch(65% 0.18 280deg / calc(var(--navbar-opacity, 0.12) * 0.67)) 0%,
          transparent 60%
        );
      border-color: oklch(
        25% 0.015 270deg / calc(var(--navbar-opacity, 0.12) * 1.25)
      );
      backdrop-filter: blur(calc(var(--navbar-opacity, 0.12) * 100px))
        saturate(calc(100% + var(--navbar-opacity, 0.12) * 50%))
        brightness(calc(1 + var(--navbar-opacity, 0.12) * 0.05))
        contrast(calc(1 + var(--navbar-opacity, 0.12) * 0.05));
    }
  }
</style>

<script>
  // ========== ASTRO-NATIVE JAVASCRIPT - MINIMAL AND PERFORMANT ==========
  // REASONING: Following Astro's zero-JavaScript philosophy with minimal interactivity
  // KISS Principle: Simple, focused functions under 5 lines each

  /**
   * Open Discord invitation - 3-line function following KISS principle
   */
  function openDiscordLink() {
    window.open('https://discord.gg/j8qmYPAGQh', '_blank');
  }

  /**
   * Generic navigation function - simplified for single route
   */
  function navigateTo(routeKey) {
    if (routeKey === 'Doc-Penjelasan') {
      window.location.href = '/docs';
    }
  }

  /**
   * Context-aware action handler - 5-line function with conditional logic
   */
  function handleGetStartedAction() {
    const isHomepage =
      window.location.pathname === '/' ||
      window.location.pathname === '/index.html';
    if (isHomepage) scrollToMission();
    else window.open('https://discord.gg/j8qmYPAGQh', '_blank');
  }

  /**
   * Scroll to mission section with retry logic - 5-line function with DOM ready check
   */
  function scrollToMission() {
    const missionSection = document.getElementById('mission');
    if (!missionSection) {
      setTimeout(scrollToMission, 100);
      return;
    }

    const navbarHeight =
      (document.querySelector('.navbar') as HTMLElement)?.offsetHeight || 0;
    const scrollToPosition = Math.max(
      0,
      missionSection.getBoundingClientRect().top +
        window.pageYOffset -
        navbarHeight -
        40
    );
    window.scrollTo({ top: scrollToPosition, behavior: 'smooth' });
  }

  /**
   * Event delegation for efficient event handling
   */
  function handleNavbarClick(event) {
    const target = event.target.closest('[data-route], [data-action]');
    if (!target) return;

    const route = target.dataset.route;
    const action = target.dataset.action;

    if (route) {
      navigateTo(route);
    } else if (action === 'discord') {
      openDiscordLink();
    } else if (action === 'metodologi') {
      window.location.href = '/panduan-lengkap-otodidak-bahasa-jepang';
    } else if (action === 'get-started') {
      handleGetStartedAction();
    } else if (action === 'menu') {
      // Dispatch custom event to open BottomNavBar menu overlay
      const menuEvent = new CustomEvent('openMenuOverlay', {
        detail: { source: 'navbar' },
      });
      document.dispatchEvent(menuEvent);
    }
  }

  /**
   * Initialize navbar functionality
   */
  function initNavbar() {
    // Event delegation for efficient event handling
    document.addEventListener('click', handleNavbarClick);
  }

  // Initialize when DOM is ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNavbar);
  } else {
    initNavbar();
  }
</script>
