---
import { Image } from 'astro:assets';
import krashenImage from '../../assets/images/krashen.webp';

interface Props {
  title?: string;
  paragraphs?: string[];
  quote?: {
    message: string;
    author: string;
    title: string;
    imageAlt: string;
    sourceUrl?: string;
  };
}

const {
  title = 'Misi Kami',
  paragraphs = [
    '<b>Misi kami 🌊 adalah memberi jalur yang menyenangkan</b>, dan <i>terbukti secara ilmiah</i> oleh 🎓 Prof. Stephen Krashen bagi siapa pun yang mulai dari <b>nol</b> untuk menguasai bahasa Jepang secara alami 🌱 dan berkelanjutan.',
    'Kami yakin belajar bahasa itu bukan sekadar menghafal aturan 📖 atau kosakata, tapi membentuk kemampuan berpikir 🤔, memahami, dan berkomunikasi seperti penutur asli. Dengan immersion, kamu langsung terjun dalam bahasa Jepang sejak hari pertama—mendengar, membaca, dan langsung memahaminya di konteks aslinya.',
    '<b>Tujuan akhir kami</b> 🎯 adalah membuat-mu "hidup" dalam bahasa Jepang, bukan sekadar mempelajarinya. Kami ingin kamu mencapai titik di mana bahasa Jepang tidak lagi diterjemahkan di kepala, tetapi dipahami  secara instan ⚡ seperti bahasa ibu. Dengan immersion, kamu membangun hubungan yang mendalam dengan budaya 🎎, pola pikir, dan ekspresi unik orang Jepang. Ini adalah perjalanan menuju <i>Nativeness</i> 💫, bukan sekadar <i>Fluency</i>—dan kami akan menemani setiap langkahmu 👣.',
  ],
  quote = {
    message:
      'Belajar bahasa tidak memerlukan aturan tata bahasa yang rumit dan tidak membutuhkan pelajaran yang membosankan.',
    author: 'Stephen D. Krashen',
    title: 'Profesor Emeritus Pendidikan di University of Southern California',
    imageAlt: 'Stephen D. Krashen',
    sourceUrl: 'https://x.com/skrashen/status/1753548631595217061',
  },
} = Astro.props;
---

<section
  id='mission'
  class='mission-section smooth-edge-bottom loading'
  transition:name='mission-section'
  data-lazy
>
  <div class='mission-container flex flex-col items-center justify-center'>
    <h2
      class='mission-title'
      id='mission-title'
      transition:name='mission-title'
    >
      {title}
    </h2>
    <div class='mission-content max-w-5xl'>
      <div class='mission-text'>
        {paragraphs.map(paragraph => <p set:html={paragraph} />)}
      </div>
    </div>
  </div>

  <!-- Quotes Section - 独立したセクションとして配置 -->
  <div class='quotes-section w-full mt-12'>
    <div class='flex justify-center'>
      <div
        class='quote-container max-w-4xl flex flex-col md:flex-row items-center gap-8'
      >
        <div class='quote-image'>
          <Image
            src={krashenImage}
            alt={quote.imageAlt}
            width={160}
            height={160}
            class='w-32 h-32 md:w-40 md:h-40 rounded-full object-cover shadow-lg'
            format='webp'
            quality={85}
            loading='lazy'
          />
        </div>
        <div class='quote-content flex-1 text-center'>
          <blockquote
            class='quote-message text-lg md:text-xl font-medium text-gray-700 dark:text-gray-300 leading-relaxed mb-4'
          >
            "{quote.message}"
          </blockquote>
          <cite
            class='quote-author text-sm md:text-base text-gray-600 dark:text-gray-400 font-medium'
          >
            <div class='flex items-center justify-center gap-2 flex-wrap'>
              <span>{quote.author}</span>
              {
                quote.sourceUrl && (
                  <>
                    <span class='text-gray-400'>―</span>
                    <a
                      href={quote.sourceUrl}
                      target='_blank'
                      rel='noopener noreferrer'
                      class='inline-flex items-center gap-1 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors duration-200'
                      aria-label='Lihat sumber di X (Twitter)'
                    >
                      <svg
                        width='14'
                        height='14'
                        viewBox='0 0 24 24'
                        fill='currentColor'
                        aria-hidden='true'
                      >
                        <path d='M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z' />
                      </svg>
                      <span>Lihat di X</span>
                    </a>
                  </>
                )
              }
            </div>
            <div
              class='text-xs md:text-sm text-gray-500 dark:text-gray-500 mt-1 text-center'
            >
              {quote.title}
            </div>
          </cite>
        </div>
      </div>
    </div>
  </div>
</section>
