---
import { CldImage } from 'astro-cloudinary';
import Marquee from '../ui/Marquee.astro';
import DiscordCard from '../ui/DiscordCard.astro';
import type { Review } from '../../data/reviews';

interface Props {
  firstRow: Review[];
  secondRow: Review[];
}
const { firstRow, secondRow } = Astro.props;
---

<!-- Unified "Solid Notebook" Section: Failure/Pause, Stories & Marquee in ONE CARD -->
<section class='py-32 relative overflow-hidden'>
  <!-- Background Ambience -->
  <div
    class='absolute top-20 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-purple-500/10 rounded-full blur-[120px] animate-pulse-slow'
  >
  </div>

  <div class='w-full max-w-7xl mx-auto px-4 lg:px-8 relative z-10 text-center'>
    <!-- THE UNIFIED MANIFESTO CARD -->
    <div class='w-full mx-auto text-left'>
      <div class='skeuo-card rounded-[2.5rem]! relative overflow-hidden group'>
        <!-- NOTEBOOK TEXTURE: subtle grid -->
        <div
          class='absolute inset-0 bg-[linear-gradient(to_right,oklch(0.6_0_0deg/0.07)_1px,transparent_1px),linear-gradient(to_bottom,oklch(0.6_0_0deg/0.07)_1px,transparent_1px)] bg-size-[24px_24px] pointer-events-none'
        >
        </div>

        <!-- Decoration: "Washi Tape" Accent at top center -->
        <div
          class='absolute top-0 left-1/2 -translate-x-1/2 w-32 h-2 bg-indigo-500/50 blur-[1px] z-10'
        >
        </div>

        <!-- ========================================== -->
        <!-- PART 1: PHILOSOPHY (The Rule)              -->
        <!-- ========================================== -->
        <div
          class='relative z-10 p-8 md:p-16 pb-0 flex flex-col items-center text-center space-y-12'
        >
          <!-- Stickered Title Block (PRESERVED EXACTLY) -->
          <div class='relative inline-block'>
            <!-- Sticker: 3D Pause Button Floating -->
            <div
              class='absolute -top-12 -right-8 hidden lg:block animate-float'
            >
              <div
                class='w-16 h-16 border-indigo-500/30! bg-[oklch(0.6_0.2_29)]! skeuo-button rounded-2xl flex items-center justify-center transform rotate-12 cursor-pointer transition-all'
              >
                <svg class='w-8 h-8 text-white fill-current' viewBox='0 0 24 24'
                  ><path d='M6 4h4v16H6V4zm8 0h4v16h-4V4z'></path></svg
                >
              </div>
            </div>

            <h2
              class='text-3xl md:text-5xl font-black tracking-tight text-white leading-tight'
            >
              Kamu Nggak Bisa "Gagal",<br />
              <span class='relative inline-block'>
                <span class='relative z-10 text-orange-400 drop-shadow-md'
                  >Cuma Bisa "Jeda".</span
                >
                <svg
                  class='absolute -bottom-2 left-0 w-full h-3 text-orange-500/50'
                  viewBox='0 0 100 10'
                  preserveAspectRatio='none'
                  ><path
                    d='M0 5 Q 50 10 100 5'
                    stroke='currentColor'
                    stroke-width='3'
                    fill='none'></path></svg
                >
              </span>
            </h2>
          </div>

          <!-- Philosophy Text (Exact Request) -->
          <div
            class='prose prose-xl prose-invert text-gray-400 leading-relaxed max-w-4xl'
          >
            <p>
              Kamu nggak bisa gagal dalam metode ini, kecuali kamu berhenti dari
              input bahasa Jepang seperti membaca dan mendengarkan sama sekali. <span
                class='text-2xl inline-block hover:scale-125 transition-transform cursor-default'
                >üõå</span
              >
            </p>
            <p>
              Di immersion, kita lagi bangun <strong
                class='text-transparent! bg-clip-text! bg-linear-to-r! from-orange-100! to-rose-200!'
                >kemampuan intuisi bawah sadar</strong
              > (deep structure). Bayangin kayak belajar naik sepeda‚Äîkamu bakal lupa
              caranya kalau nggak naik setahun? Nggak tuh. Sama kayak bahasa yang
              diserap secara alami, dia nempel kuat di otakmu.
            </p>
            <p>
              Jadi, santai aja‚Äîprosesnya fleksibel, cocok buat kamu dan semua
              manusia pada umumnya. Karena metode "immersion" kita ini udah
              terbukti sejak zaman peradaban manusia dulu, dan didukung kuat
              sama ilmu linguistik modern dari para profesor ahli.
            </p>
          </div>
        </div>

        <!-- SEPARATOR: Subtle Gradient Line -->
        <div
          class='relative w-full h-px bg-linear-to-r from-transparent via-white/10 to-transparent my-16'
        >
        </div>

        <!-- ========================================== -->
        <!-- PART 2: STORIES (The Proof)                -->
        <!-- ========================================== -->
        <div class='relative z-10 p-8 md:p-16 pt-0 mb-8'>
          <div class='grid lg:grid-cols-2 gap-8 lg:gap-16 items-start'>
            <!-- 1. HEADER & TITLE (Mobile: Top, Desktop: Left Top) -->
            <div class='lg:col-start-1 lg:row-start-1 space-y-4'>
              <!-- Header with 'Stamp' -->
              <div class='flex items-center gap-4 mb-2'>
                <div
                  class='px-3 py-1 rounded bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 text-xs font-mono font-bold uppercase tracking-widest flex items-center gap-2'
                >
                  <span class='w-2 h-2 rounded-full bg-indigo-400 animate-pulse'
                  ></span>
                  Case Study #01
                </div>
                <div class='text-xs text-zinc-500 font-mono hidden md:block'>
                  2026 COMMUNITY LOG
                </div>
              </div>

              <h3
                class='text-3xl md:text-5xl font-black text-white leading-tight'
              >
                Kisah Kami yang <span
                  class='bg-indigo-500/10 text-indigo-300 px-2 leading-relaxed box-decoration-clone'
                  >Progress dalam Nativeness</span
                >
              </h3>
            </div>

            <!-- 2. PHOTO (Mobile: Middle/Red Area, Desktop: Right Full Height) -->
            <div class='lg:col-start-2 lg:row-start-1 lg:row-span-2 w-full'>
              <div
                class='relative transform rotate-3 hover:rotate-0 transition-transform duration-500 ease-out perspective-1000'
              >
                <!-- Photo Frame Effect -->
                <div
                  class='p-3 bg-white rounded-xl shadow-[0_20px_50px_-12px_oklch(0_0_0deg/0.5)] relative'
                >
                  <!-- Tape on corner -->
                  <div
                    class='absolute -top-3 left-1/2 -translate-x-1/2 w-24 h-8 bg-yellow-100/30 backdrop-blur-sm -rotate-2 border-l border-r border-white/20 shadow-sm z-20'
                  >
                  </div>

                  <div
                    class='rounded-lg overflow-hidden bg-zinc-900 border border-zinc-200/20 relative'
                  >
                    <div
                      class='absolute inset-0 bg-linear-to-tr from-indigo-500/20 to-transparent mix-blend-overlay z-10'
                    >
                    </div>
                    <CldImage
                      src='Sample_Novel_Generated_Image_54tw1q54tw1q54tw_zmhkhw'
                      width={800}
                      height={1000}
                      class='w-full h-auto relative z-0'
                      alt='Bukti Nyata Immersion'
                    />
                  </div>
                  <!-- Caption on the 'paper' border -->
                  <div
                    class='pt-3 pb-1 px-1 flex justify-between items-center opacity-60'
                  >
                    <p
                      class='text-[10px] text-zinc-900 font-mono tracking-widest uppercase flex-1'
                    >
                      Figure 1.1: Immersion Material
                    </p>
                    <svg
                      class='w-4 h-4 text-zinc-400'
                      viewBox='0 0 24 24'
                      fill='none'
                      stroke='currentColor'
                      stroke-width='2'
                      ><path
                        d='M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z'
                      ></path><circle cx='12' cy='13' r='4'></circle></svg
                    >
                  </div>
                </div>

                <!-- Decorative Sticker: Level Up -->
                <div
                  class='absolute -top-6 -right-6 w-20 h-20 bg-yellow-400 rounded-full flex items-center justify-center shadow-xl border-4 border-white transform rotate-12 group-hover:scale-110 transition-transform'
                >
                  <span
                    class='text-black font-black text-xs text-center leading-none'
                    >LEVEL<br />UP!</span
                  >
                </div>
              </div>
            </div>

            <!-- 3. BODY TEXT (Mobile: Bottom, Desktop: Left Bottom) -->
            <div
              class='lg:col-start-1 lg:row-start-2 prose prose-lg prose-invert text-zinc-400 space-y-6'
            >
              <p>
                Di komunitas kita, ceritanya beda banget. Ada anggota yang dulu
                stres banget hafal buku Minna no Nihongo, sekarang bisa
                ketawa-ketawa nonton livestream VTuber, nonton Anime tanpa
                Subtitle, dan baca light novel susah sekalipun kayak „ÄåRe:Zero
                kara Hajimeru Isekai Seikatsu„Äç atau „ÄåÂπºÂ•≥Êà¶Ë®ò Youjo Senki„Äç.
              </p>
              <p
                class='text-zinc-300 font-medium border-l-4 border-indigo-500 pl-6 italic'
              >
                "Mereka bukan orang jenius atau punya bakat super. Mereka cuma
                berhenti melawan cara kerja otak mereka sendiri."
              </p>
              <p>
                Mereka berhenti jadi "murid" yang hafal doang, dan mulai jadi
                "penutur" yang beneran hidup di bahasa itu. Kalau mereka bisa,
                kamu juga pasti bisa‚Äîkarena masalahnya bukan di kamu, tapi di
                metode lama yang salah.
              </p>
            </div>
          </div>
        </div>

        <!-- ========================================== -->
        <!-- PART 3: FOOTER (Marquee/Logs)              -->
        <!-- ========================================== -->
        <div
          class='relative border-t border-dashed border-white/10 bg-black/20 pt-12 pb-12'
        >
          <!-- Label -->
          <div
            class='absolute -top-3 left-8 md:left-12 px-3 py-1 bg-[oklch(0.161_0.004_286)] rounded border border-white/10 text-[10px] font-mono text-zinc-500 uppercase tracking-widest flex items-center gap-2'
          >
            <span class='w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse'
            ></span>
            Live Community Logs
          </div>

          <div
            class='opacity-70 hover:opacity-100 transition-opacity duration-300'
          >
            <!-- MOBILE: Single Vertical Marquee -->
            <div class='md:hidden h-112 px-4 flex justify-center'>
              <Marquee
                vertical
                pauseOnHover
                class='[--duration:90s] [--gap:1rem]'
              >
                {
                  [...firstRow, ...secondRow].map(review => (
                    <DiscordCard {...review} />
                  ))
                }
              </Marquee>
            </div>

            <!-- DESKTOP: Two Horizontal Marquees -->
            <div class='hidden md:block'>
              <!-- Top Row: Marquee Left -->
              <Marquee pauseOnHover class='[--duration:60s] [--gap:2rem] mb-6'>
                {firstRow.map(review => <DiscordCard {...review} />)}
              </Marquee>

              <!-- Bottom Row: Marquee Right (Reverse) -->
              <Marquee
                reverse
                pauseOnHover
                class='[--duration:70s] [--gap:2rem]'
              >
                {secondRow.map(review => <DiscordCard {...review} />)}
              </Marquee>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
