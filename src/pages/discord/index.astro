---
import UnifiedSEO from '../../components/UnifiedSEO.astro';

// SEO data - Astro„Éç„Ç§„ÉÜ„Ç£„Éñ„Ç¢„Éó„É≠„Éº„ÉÅÔºàË®≠ÂÆö„Éï„Ç°„Ç§„É´‰∏çË¶ÅÔºâ
const seoData = {
  title: 'Komunitas Pembelajaran Bahasa Jepang - Discord GoRakuDo',
  description:
    'Bergabung dengan komunitas pembelajaran bahasa Jepang terbesar Indonesia. Berbagi pengalaman, dapatkan bantuan, dan pelajari bahasa Jepang bersama-sama',
  keywords: [
    'komunitas',
    'discord',
    'bahasa',
    'jepang',
    'belajar',
    'pembelajaran',
    'bersama',
    'pengalaman',
    'bantuan',
    'learning',
  ],
  pageType: 'website' as const,
};
---

<html lang='id'>
  <head>
    <!-- UnifiedSEO - Astro„Éç„Ç§„ÉÜ„Ç£„Éñ„Ç¢„Éó„É≠„Éº„ÉÅÔºàË®≠ÂÆö„Éï„Ç°„Ç§„É´‰∏çË¶ÅÔºâ -->
    <UnifiedSEO
      title={seoData.title}
      description={seoData.description}
      keywords={seoData.keywords}
      pageType={seoData.pageType}
      lang='id'
      gtag={import.meta.env.PUBLIC_GA_ID}
    />
    <link
      href='https://fonts.googleapis.com/css2?family=Yuji+Syuku&family=Inter:wght@300;400;500;600;700&family=Lora:wght@400;600&family=Cedarville+Cursive&display=swap'
      rel='stylesheet'
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
        background: linear-gradient(
          135deg,
          oklch(8% 0 0deg) 0%,
          oklch(12% 0 0deg) 100%
        );
        color: oklch(25% 0 0deg);
        font-family: Inter, sans-serif;
      }

      .invitation-container {
        position: relative;
        width: 100%;
        max-width: 600px;
        padding: 50px;
        border: 1px solid oklch(65% 0.25 280deg / 0.1);
        border-radius: 12px;
        background: oklch(99% 0.01 60deg);
        animation: fadeIn 1s ease-out;
        box-shadow: 0 20px 60px oklch(65% 0.25 280deg / 0.2);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(30px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .back-button {
        position: absolute;
        top: 20px;
        left: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 40px;
        height: 40px;
        border: none;
        border-radius: 50%;
        background: none;
        color: oklch(45% 0 0deg);
        font-size: 24px;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .back-button:hover {
        background: oklch(94% 0 0deg);
        color: oklch(25% 0 0deg);
      }

      .header {
        margin-bottom: 30px;
        padding-bottom: 25px;
        border-bottom: 1px solid oklch(88% 0 0deg);
        text-align: center;
      }

      .japanese-title {
        color: oklch(25% 0 0deg);
        font-family:
          Yuji Syuku,
          serif;
        font-size: 4.5rem;
        font-weight: 400;
        line-height: 1;
        ruby-position: over;
      }

      .japanese-title rt {
        color: oklch(45% 0 0deg);
        font-family: Inter, sans-serif;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .content {
        margin-bottom: 30px;
        color: oklch(28% 0 0deg);
        font-family: Lora, serif;
        font-size: 1.1rem;
        line-height: 1.8;
      }

      .content p {
        margin-bottom: 1.2em;
      }

      .content strong {
        color: oklch(25% 0 0deg);
      }

      .member-list {
        margin: 25px 0;
        padding-left: 0;
        list-style: none;
      }

      .member-list li {
        margin-bottom: 10px;
        font-family: Inter, sans-serif;
      }

      .final-pitch {
        margin-top: 30px;
        color: oklch(25% 0 0deg);
        font-size: 1.15rem;
        font-weight: 600;
        text-align: center;
      }

      .discord-link {
        display: block;
        margin: 20px;
        padding: 20px;
        border: 1px solid oklch(92% 0 0deg);
        border-radius: 8px;
        background-color: oklch(97% 0 0deg);
        color: oklch(25% 0 0deg);
        text-decoration: none;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .discord-link:hover {
        border-color: oklch(65% 0.25 280deg);
        box-shadow: 0 5px 15px oklch(65% 0.25 280deg / 0.2);
      }

      .discord-header {
        margin-bottom: 8px;
        color: oklch(45% 0 0deg);
        font-family: Inter, sans-serif;
        font-size: 0.9rem;
        font-weight: 600;
      }

      .discord-url {
        color: oklch(65% 0.25 280deg);
        font-family: Inter, sans-serif;
        font-size: 1.1rem;
        font-weight: 600;
        overflow-wrap: break-word;
      }

      .arrow {
        display: inline-block;
        font-weight: bold;
        transition: transform 0.2s ease;
      }

      .discord-link:hover .arrow {
        transform: translateX(5px);
      }

      .discord-refresh-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        margin-top: 8px;
        margin-bottom: 40px;
      }

      .discord-refresh-text {
        color: oklch(45% 0 0deg);
        font-family: Inter, sans-serif;
        font-size: 0.85rem;
      }

      .discord-refresh-button {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 4px;
        border: none;
        border-radius: 4px;
        background: none;
        color: oklch(45% 0 0deg);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .discord-refresh-button:hover {
        background: oklch(94% 0 0deg);
        color: oklch(65% 0.25 280deg);
      }

      .discord-refresh-button:active {
        transform: scale(0.95);
      }

      .discord-refresh-icon {
        width: 18px;
        height: 18px;
        transition: transform 0.3s ease;
      }

      .discord-refresh-button:hover .discord-refresh-icon {
        transform: rotate(90deg);
      }

      .discord-refresh-icon.refreshing {
        animation: rotate 0.6s ease-in-out;
      }

      @keyframes rotate {
        from {
          transform: rotate(0deg);
        }

        to {
          transform: rotate(360deg);
        }
      }

      .signature {
        display: flex;
        justify-content: space-between;
        align-items: flex-end;
        margin-top: 20px;
      }

      .logo {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 80px;
        height: 80px;
        border-radius: 12px;
        background: linear-gradient(
          135deg,
          oklch(65% 0.25 280deg) 0%,
          oklch(60% 0.25 280deg) 100%
        );
        color: oklch(100% 0 0deg);
        font-size: 32px;
        font-weight: bold;
        flex-shrink: 0;
      }

      .logo-stamp {
        width: 80px;
        height: 80px;
        opacity: 0.5; /* Memberi efek stempel */
        flex-shrink: 0;
      }

      .signature-text {
        text-align: right;
      }

      .signature-title {
        margin-bottom: -10px;
        color: oklch(25% 0 0deg);
        text-align: right;
      }

      .signature-name {
        color: oklch(25% 0 0deg);
        font-family:
          Cedarville cursive,
          cursive;
        font-size: 1.9rem;
        text-align: right;
      }

      /* Responsive design */
      @media (max-width: 768px) {
        .invitation-container {
          padding: 40px 25px;
        }

        .japanese-title {
          font-size: 3.2rem;
        }

        .content {
          font-size: 1rem;
        }

        .signature-name {
          font-size: 1.6rem;
        }
      }

      @media (max-width: 480px) {
        .signature {
          flex-direction: column;
          align-items: center;
          gap: 20px;
        }

        .signature-text {
          text-align: center;
        }
      }
    </style>
  </head>
  <body>
    <div class='invitation-container'>
      <a href='/' class='back-button'>‚Üê</a>

      <div class='header'>
        <ruby class='japanese-title'>
          Ë™û<rt>„Åî</rt>Ê•Ω<rt>„Çâ„Åè</rt>ÈÅì<rt>„Å©„ÅÜ</rt>
        </ruby>
      </div>

      <div class='content'>
        <p>
          Kami bukan komunitas biasa. Kita adalah rumah bagi para pembelajar
          otodidak yang terjun langsung ke <strong>üåä Metode IMMERSION</strong
          >‚Äîsebuah cara belajar yang seru, alami, dan terbukti secara ilmiah
          oleh üéì Prof. Stephen Krashen.
        </p>

        <p><strong>Siapa yang kami cari?</strong></p>
        <ul class='member-list'>
          <li>
            ‚úÖ <strong>Otaku & Anime Lovers:</strong> Ubah hobimu jadi skill!
          </li>
          <li>
            ‚úÖ <strong>Pembelajar Serius:</strong> Temukan cara belajar paling efektif.
          </li>
        </ul>

        <p class='final-pitch'>
          Semua 100% GRATIS. Yang kamu butuhkan hanya NIAT.<br />Ayo bergabung!
          üëç
        </p>
      </div>

      <a
        href='https://discord.gg/j8qmYPAGQh'
        target='_blank'
        rel='noopener noreferrer'
        class='discord-link'
      >
        <div class='discord-header'>Alamat Komunitas Digital Kami:</div>
        <div class='discord-url'>
          discord.gg/j8qmYPAGQh <span class='arrow'>‚Üí</span>
        </div>
      </a>

      <div class='discord-refresh-container'>
        <span class='discord-refresh-text'>Link Join Invalid/Error?</span>
        <button
          class='discord-refresh-button'
          type='button'
          aria-label='Refresh Discord link'
        >
          <svg
            xmlns='http://www.w3.org/2000/svg'
            width='24'
            height='24'
            viewBox='0 0 24 24'
            fill='none'
            stroke='currentColor'
            stroke-width='2'
            stroke-linecap='round'
            stroke-linejoin='round'
            class='discord-refresh-icon lucide-refresh-ccw'
          >
            <path d='M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8'></path>
            <path d='M3 3v5h5'></path>
            <path d='M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16'
            ></path>
            <path d='M16 16h5v5'></path>
          </svg>
        </button>
      </div>

      <div class='signature'>
        <img
          src='/img/Logo%20Discord%2080px.webp'
          alt='Logo Gorakudou'
          class='logo-stamp'
        />
        <div class='signature-text'>
          <div class='signature-title'>Hormat kami,</div>
          <p class='signature-name'>Tim GoRakuDo</p>
        </div>
      </div>
    </div>

    <script>
      function goBack() {
        // Check if we came from within the site
        if (
          document.referrer &&
          document.referrer.includes(window.location.hostname)
        ) {
          window.history.back();
        } else {
          // Default to home page if no referrer or external referrer
          window.location.href = '/';
        }
      }

      // Discord links array
      const discordLinks = [
        'https://discord.gg/j8qmYPAGQh',
        'https://discord.gg/teFHUfTRZF',
        'https://discord.gg/M9gcJT8xYx',
      ];

      // Function to select and update random Discord link
      function selectRandomDiscordLink(forceRefresh = false) {
        let randomLink;
        const storageKey = 'gorakudo_discord_link';

        // Try to get from storage first unless forcing refresh
        if (!forceRefresh) {
          const storedLink = sessionStorage.getItem(storageKey);
          if (storedLink && discordLinks.includes(storedLink)) {
            randomLink = storedLink;
          }
        }

        // If no stored link or forced refresh, pick new one
        if (!randomLink) {
          randomLink =
            discordLinks[Math.floor(Math.random() * discordLinks.length)];
          sessionStorage.setItem(storageKey, randomLink);
        }

        const linkCode = randomLink.split('/').pop() || '';

        const discordLink = document.querySelector(
          '.discord-link'
        ) as HTMLAnchorElement;
        const discordUrl = document.querySelector(
          '.discord-url'
        ) as HTMLElement;

        if (discordLink && discordUrl) {
          discordLink.href = randomLink;
          discordUrl.innerHTML = `discord.gg/${linkCode} <span class='arrow'>‚Üí</span>`;
        }
      }

      // Function to initialize all interactive elements
      function initPage() {
        // Animate the content elements
        const elements = document.querySelectorAll(
          '.content p, .member-list li'
        );
        elements.forEach((el, index) => {
          const element = el as HTMLElement;
          // Reset style for re-animation
          element.style.opacity = '0';
          element.style.transform = 'translateY(20px)';
          element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';

          setTimeout(
            () => {
              element.style.opacity = '1';
              element.style.transform = 'translateY(0)';
            },
            (index + 1) * 100
          );
        });

        // Initial random Discord link selection
        selectRandomDiscordLink();

        // Add hover effect to discord link
        const discordLink = document.querySelector(
          '.discord-link'
        ) as HTMLElement;
        if (discordLink) {
          // Remove existing listeners to prevent duplication (optional but good practice)
          const newDiscordLink = discordLink.cloneNode(true) as HTMLElement;
          if (discordLink.parentNode) {
            discordLink.parentNode.replaceChild(newDiscordLink, discordLink);
          }

          newDiscordLink.addEventListener('mouseenter', function () {
            this.style.transform = 'scale(1.02)';
          });
          newDiscordLink.addEventListener('mouseleave', function () {
            this.style.transform = 'scale(1)';
          });
        }

        // Refresh button handler
        const refreshButton = document.querySelector(
          '.discord-refresh-button'
        ) as HTMLButtonElement;

        if (refreshButton) {
          // Clone to remove existing listeners
          const newRefreshButton = refreshButton.cloneNode(
            true
          ) as HTMLButtonElement;
          if (refreshButton.parentNode) {
            refreshButton.parentNode.replaceChild(
              newRefreshButton,
              refreshButton
            );
          }

          const refreshIcon = newRefreshButton.querySelector(
            '.discord-refresh-icon'
          ) as SVGElement;

          newRefreshButton.addEventListener('click', function () {
            // Add refreshing animation
            if (refreshIcon) {
              refreshIcon.classList.add('refreshing');

              // Remove animation class after animation completes
              setTimeout(() => {
                refreshIcon.classList.remove('refreshing');
              }, 600);
            }

            // Select new random link
            selectRandomDiscordLink(true);
          });
        }
      }

      // Execute on initial load (for MPA behavior)
      document.addEventListener('DOMContentLoaded', initPage);

      // Execute on View Transitions navigation (for SPA behavior if navigated from other pages)
      document.addEventListener('astro:page-load', initPage);

      // Keyboard navigation
      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
          goBack();
        }
      });
    </script>
  </body>
</html>
