/* ========== CONTENT PAGE STYLES ========== */

/* Custom styles for content pages that cannot be handled by Tailwind Typography */

/* 
 * VARIABLE ORGANIZATION:
 * - High-frequency variables (3+ uses): Moved to global.css for better maintainability
 * - Low-frequency variables (1-2 uses): Kept local for component-specific styling
 * 
 * High-frequency variables in global.css:
 * - --clr-content-border (4 uses)
 * - --clr-content-background-card (3 uses) 
 * - --shadow-content-card (4 uses)
 * - --clr-content-meta (4 uses)
 * - --clr-accent-glow-medium (3 uses)
 * - --clr-primary (3 uses)
 * - --clr-primary-dark (3 uses)
 */

@import './global.css';

/* ========== CONTENT PAGE LAYOUT ========== */

.content-page {
  @apply min-h-screen w-full relative z-[var(--z-content-main)] m-0;
  @apply bg-[var(--clr-content-background-light)] bg-[length:30px_30px];
  @apply pt-20 pb-8 backdrop-blur-[1px];
  @apply md:pt-16 md:pb-6;
  @apply max-sm:pt-12 max-sm:pb-4;
}

.content-container {
  @apply max-w-4xl pt-8 px-0 pb-0 box-border;
  @apply md:pt-6;
  @apply max-sm:pt-4;
  @apply w-dvw max-w-full;
}

/* ========== LAYOUT SUPPORT ========== */
.content-wrapper {
  @apply flex gap-0 px-0 max-w-full;
  @apply sm:gap-4;
  @apply md:gap-5;
  @apply lg:gap-6;
  @apply xl:gap-8;
  @apply 2xl:gap-8;
}

.content-wrapper .content-container {
  @apply flex-1 min-w-0 max-w-full p-3;
  @apply sm:p-4;
  @apply md:p-6;
  @apply lg:p-7;
  @apply xl:p-8;
  @apply 2xl:p-10 2xl:max-w-4xl;
}

/* ========== BREADCRUMB ========== */
.breadcrumb-nav {
  @apply bg-transparent backdrop-filter-none border-none shadow-none;
}

.content-container .modern-breadcrumb-nav {
  @apply w-full max-w-full m-0 p-0 overflow-hidden;
}

.content-container .breadcrumb-container {
  @apply w-full max-w-full overflow-hidden relative;
}

.content-container .breadcrumb-list {
  @apply w-full max-w-full overflow-x-auto overflow-y-hidden p-0 m-0;
}

.content-container .breadcrumb-item {
  @apply flex-shrink-0 max-w-fit gap-1 items-center;
}

.content-container .breadcrumb-icon {
  @apply flex-shrink-0 text-base leading-none;
}

.content-container .breadcrumb-separator {
  @apply flex-shrink-0 mx-1;
}

/* ========== BUTTONS ========== */

/* Using high-frequency variables from global.css: --clr-primary, --clr-accent-glow-medium */
.back-to-content,
.back-to-docs,
.back-to-tools,
.share-btn {
  @apply inline-flex items-center gap-2 no-underline mb-0 outline-none h-10 box-border whitespace-nowrap;
  @apply text-sm font-medium text-[var(--clr-primary)];
  @apply bg-[var(--clr-accent-glow-faint)] px-4 py-2 rounded-lg;
  @apply border border-[var(--clr-accent-glow-medium)];
  @apply transition-all duration-300 ease-in-out;
  @apply hover:text-[var(--clr-accent-dark)] hover:bg-[var(--clr-accent-glow-medium)];
  @apply hover:border-[var(--clr-accent-glow-strong)] hover:-translate-y-px;
  @apply hover:shadow-[0_4px_12px_var(--clr-accent-glow-medium)];
  @apply focus-visible:outline-2 focus-visible:outline-[var(--clr-accent)] focus-visible:outline-offset-2;
  @apply focus-visible:shadow-[0_0_0_2px_var(--clr-accent-glow-medium)];
  @apply active:scale-95 active:transition-transform;
  @apply max-[480px]:px-3 max-[480px]:py-1.5 max-[480px]:text-[0.8rem] max-[480px]:h-9;
  @apply min-h-[44px] min-w-[44px]; /* Touch target accessibility */
}

/* ========== CONTENT HEADER ========== */

/* Using high-frequency variables from global.css: --clr-content-border, --clr-content-background-card, --shadow-content-card */
.content-header {
  @apply text-center mx-2 my-8 p-6 rounded-2xl min-h-60;
  @apply border border-[var(--clr-content-border)];
  @apply bg-[var(--clr-content-background-card)] backdrop-blur-[5px];
  @apply shadow-[var(--shadow-content-card)];
  @apply flex flex-col justify-center items-center;
  @apply md:mx-1 md:my-6 md:p-5 md:min-h-50;
  @apply max-sm:mx-0 max-sm:my-4 max-sm:p-4 max-sm:min-h-40;
}

.content-header h1 {
  @apply text-3xl font-bold mb-4 text-white leading-tight;
  @apply md:text-2xl;
  @apply max-sm:text-xl max-sm:mb-3;
  @apply focus:outline-none focus:ring-2 focus:ring-[var(--clr-accent)] focus:ring-offset-2;
  @apply focus:ring-offset-[var(--clr-content-background-card)];
}

/* Using high-frequency variable from global.css: --clr-content-meta */
.content-meta {
  @apply flex items-center justify-center gap-5 mb-3 text-sm flex-wrap;
  @apply text-[var(--clr-content-meta)];
  @apply max-sm:gap-3 max-sm:text-[0.8rem];
}

.content-date,
.content-author,
.content-read-time {
  @apply text-[var(--clr-content-meta)];
}

/* ========== LEGACY SUPPORT ========== */

/* Consolidated legacy selectors for backward compatibility */
.post-header {
  @apply text-center mx-2 my-8 p-6 rounded-2xl min-h-60;
  @apply border border-[var(--clr-content-border)];
  @apply bg-[var(--clr-content-background-card)] backdrop-blur-[5px];
  @apply shadow-[var(--shadow-content-card)];
  @apply flex flex-col justify-center items-center;
  @apply md:mx-1 md:my-6 md:p-5 md:min-h-50;
  @apply max-sm:mx-0 max-sm:my-4 max-sm:p-4 max-sm:min-h-40;
}

.post-meta {
  @apply flex items-center justify-center gap-5 mb-3 text-sm flex-wrap;
  @apply text-[var(--clr-content-meta)];
  @apply max-sm:gap-3 max-sm:text-[0.8rem];
}

.post-date,
.post-author,
.post-read-time { @apply text-[var(--clr-content-meta)]; }

.post-title { @apply text-inherit; }

/* ========== DIFFICULTY BADGES ========== */

/* Low-frequency variables (1-2 uses) - kept local for component-specific styling */
.content-tags {
  @apply flex items-center justify-center gap-3;
}

.difficulty-badge {
  @apply py-1.5 px-3 rounded-full text-xs font-semibold inline-block mx-auto text-center;
}

.difficulty-badge.difficulty-beginner {
  @apply bg-[oklch(60%_0.15_145deg/0.2)] text-green-300 border border-[oklch(60%_0.15_145deg/0.3)];
}

.difficulty-badge.difficulty-intermediate {
  @apply bg-[oklch(70%_0.15_85deg/0.2)] text-yellow-300 border border-[oklch(70%_0.15_85deg/0.3)];
}

.difficulty-badge.difficulty-advanced {
  @apply bg-[oklch(60%_0.15_25deg/0.2)] text-red-300 border border-[oklch(60%_0.15_25deg/0.3)];
}

.post-tags {
  @apply flex items-center justify-center gap-3;
}

/* ========== CONTENT TYPOGRAPHY ========== */
.content-main {
  @apply p-6 px-4 max-w-none bg-transparent rounded-lg w-full relative block;
  @apply md:p-5 md:px-3;
  @apply max-sm:p-4 max-sm:px-2;
}

.content-main.prose p {
  @apply mb-8 leading-relaxed; /* 32px bottom margin + relaxed line height */
}

.prose p:last-child {
  @apply mb-0; /* Remove bottom margin from last paragraph */
}

.content-main.prose :where(h1, h2, h3, h4, h5) {
  @apply scroll-mt-8;
}

.content-main.prose h1 {
  @apply mb-6 mt-8 leading-tight; /* 24px bottom, 32px top margin */
}

.content-main.prose h2 {
  @apply relative mb-5 mt-8 leading-tight; /* 20px bottom, 32px top margin */
}

.content-main.prose h2::before {
  position: absolute;
  top: 50%;
  left: -1.25rem;
  width: 4px;
  height: 1.5rem;
  border-radius: 2px;
  background: linear-gradient(
    135deg,
    var(--clr-primary),
    var(--clr-primary-dark)
  );
  opacity: 0.8;
  transform: translateY(-50%);
  content: '';
  transition: opacity 0.2s ease;
}

.content-main.prose h3 {
  @apply mb-4 mt-6 leading-snug; /* 16px bottom, 24px top margin */
}

.content-main.prose h4 {
  @apply mb-3 mt-5 leading-snug; /* 12px bottom, 20px top margin */
}

.content-main.prose h5 {
  @apply mb-2 mt-4 leading-snug; /* 8px bottom, 16px top margin */
}

.content-main.prose ul {
  @apply my-4;

  padding-left: 1.5rem;
  list-style-type: disc;
}

.content-main.prose ol {
  @apply my-4;

  padding-left: 1.5rem;
  list-style-type: decimal;
}

.content-main.prose hr {
  @apply my-4;
}

.content-main.prose ul li {
  @apply relative pl-2 mb-2;

  list-style-type: disc;
}

.content-main.prose ol li {
  @apply relative pl-2 mb-2;

  list-style-type: decimal;
}

.content-main.prose ul li::before {
  display: none; /* Disable custom bullet to show default disc */
}

.post-content {
  @apply p-6 px-4 max-w-none bg-transparent rounded-lg w-full relative block;
  @apply text-[var(--clr-content-text)];
  @apply md:p-5 md:px-3;
  @apply max-sm:p-4 max-sm:px-2;
}

/* ========== ACTION BUTTONS ========== */

/* Using high-frequency variables from global.css: --clr-content-border, --clr-content-background-card-hover, --shadow-content-card */
.content-actions {
  @apply flex flex-col justify-between items-center gap-4 p-6 my-8 rounded-2xl;
  @apply border border-[var(--clr-content-border)];
  @apply bg-[var(--clr-content-background-card-hover)] backdrop-blur-[2px];
  @apply shadow-[var(--shadow-content-card)];
  @apply sm:flex-row;
  @apply md:my-6 md:p-5;
  @apply max-sm:my-4 max-sm:p-4 max-sm:gap-3;
}

.action-buttons {
  @apply flex items-center gap-4 w-full justify-between;
  @apply max-sm:flex-col max-sm:gap-3;
  @apply max-[480px]:gap-2;
}

.share-buttons {
  @apply flex gap-3 items-center;
  @apply max-[480px]:gap-2;
}

.post-actions {
  @apply flex flex-col justify-between items-center gap-4 p-6 my-8 rounded-2xl;
  @apply border border-[var(--clr-content-border)];
  @apply bg-[var(--clr-content-background-card-hover)] backdrop-blur-[2px];
  @apply shadow-[var(--shadow-content-card)];
  @apply sm:flex-row;
  @apply md:my-6 md:p-5;
  @apply max-sm:my-4 max-sm:p-4 max-sm:gap-3;
}

/* ========== READING PROGRESS ========== */
.reading-progress {
  @apply fixed top-0 left-0 w-0 h-[3px] z-[var(--z-content-progress)];
  @apply transition-[width] duration-100 ease-linear;

  background: linear-gradient(
    90deg,
    var(--clr-primary),
    var(--clr-primary-dark)
  );
}

/* ========== ACCESSIBILITY & RESPONSIVE ========== */
@media (prefers-reduced-motion: reduce) {
  .back-to-content,
  .back-to-docs,
  .back-to-tools,
  .share-btn,
  .reading-progress,
  .internal-link,
  .internal-link::before {
    transition: none ;
    animation: none ;
  }
}

/* ========== HIGH CONTRAST MODE ========== */
@media (prefers-contrast: high) {
  .content-header,
  .content-actions,
  .post-header,
  .post-actions {
    border: 2px solid oklch(50% 0.01 270deg);
  }

  .back-to-content,
  .back-to-docs,
  .back-to-tools,
  .share-btn {
    border: 2px solid var(--clr-primary);
  }

  .content-main :where(h1, h2, h3, h4, h5),
  .post-content :where(h1, h2, h3, h4, h5) {
    color: oklch(100% 0 0deg);
  }

  .content-main :where(p, li, blockquote),
  .post-content :where(p, li, blockquote) {
    color: oklch(100% 0 0deg);
  }

  .content-meta,
  .content-date,
  .content-author,
  .content-read-time,
  .post-meta,
  .post-date,
  .post-author,
  .post-read-time {
    color: oklch(100% 0 0deg / 0.95);
  }
}

/* ========== CODE BLOCKS ========== */

code {
  padding: 0;
  background: none;
}

pre {
  @apply my-4 p-4 border border-[var(--clr-accent-glow-faint)] rounded-lg;
  @apply bg-none shadow-[var(--shadow-content-card)];
  @apply overflow-x-auto;
}
