/**
 * Word Internal Link Styles for Astro SSG
 * 
 * Styling for words converted to internal links that look like normal text
 * but provide internal navigation with hover tooltips and subtle interactions.
 * 
 * Features:
 * - Invisible styling (looks exactly like normal text)
 * - Hover tooltips with post titles
 * - Subtle interaction states
 * - Full accessibility support
 * - Dark mode and high contrast compatibility
 * - Print-friendly styles
 * 
 * @author Google 2025 Engineering Team
 * @framework Astro SSG with Tailwind v4.1
 * @version 1.0.0
 */

/* ========== BASE WORD LINK STYLES ========== */

/**
 * Base styling for all word internal links
 * Ensures links inherit text properties while enabling interaction
 */
.word-internal-link {
  /* Inherit all text properties to look like normal text */
  color: inherit;
  text-decoration: none;
  font-weight: inherit;
  font-style: inherit;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;

  /* Reset any potential link styling */
  background: none;
  border: none;
  padding: 0;
  margin: 0;

  /* Enable smooth interactions */
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;

  /* Ensure accessibility */
  outline-offset: 0.125rem;
}

/* ========== INVISIBLE LINK STYLE ========== */

/**
 * Invisible style - looks exactly like normal text
 * Only reveals link nature on hover/focus for maximum naturalness
 */
.word-link-invisible {
  color: inherit;
  text-decoration: none;
}

.word-link-invisible:hover {
  color: var(--color-primary-600, #2563eb);
  text-decoration: underline;
  text-decoration-color: var(--color-primary-400, #60a5fa);
  text-decoration-thickness: 0.0625rem; /* 1px */
  text-underline-offset: 0.125rem; /* 2px */
}

.word-link-invisible:focus {
  outline: 0.125rem solid var(--color-primary-400, #60a5fa);
  outline-offset: 0.125rem;
  border-radius: 0.125rem;
  color: var(--color-primary-600, #2563eb);
  background-color: var(--color-primary-50, #eff6ff);
}

.word-link-invisible:active {
  color: var(--color-primary-700, #1d4ed8);
  text-decoration-color: var(--color-primary-500, #3b82f6);
}

/* ========== SUBTLE LINK STYLE ========== */

/**
 * Subtle style - very minimal visual difference
 * Slight visual hint with enhanced hover states
 */
.word-link-subtle {
  color: inherit;
  text-decoration: none;
  border-bottom: 0.0625rem solid transparent;
  transition: all 0.2s ease;
}

.word-link-subtle:hover {
  color: var(--color-primary-600, #2563eb);
  border-bottom-color: var(--color-primary-400, #60a5fa);
  background-color: var(--color-primary-25, #f8faff);
  padding: 0.0625rem 0.125rem;
  margin: -0.0625rem -0.125rem;
  border-radius: 0.1875rem;
}

.word-link-subtle:focus {
  outline: 0.125rem solid var(--color-primary-400, #60a5fa);
  outline-offset: 0.125rem;
  border-radius: 0.1875rem;
  color: var(--color-primary-600, #2563eb);
  background-color: var(--color-primary-50, #eff6ff);
}

/* ========== MINIMAL LINK STYLE ========== */

/**
 * Minimal style - slight color change to indicate linkability
 * More obvious than invisible but still very subtle
 */
.word-link-minimal {
  color: var(--color-primary-700, #1d4ed8);
  text-decoration: none;
  transition: color 0.2s ease;
}

.word-link-minimal:hover {
  color: var(--color-primary-800, #1e40af);
  text-decoration: underline;
  text-decoration-color: var(--color-primary-500, #3b82f6);
  text-decoration-thickness: 0.0625rem;
  text-underline-offset: 0.125rem;
}

.word-link-minimal:focus {
  outline: 0.125rem solid var(--color-primary-400, #60a5fa);
  outline-offset: 0.125rem;
  border-radius: 0.125rem;
  color: var(--color-primary-800, #1e40af);
  background-color: var(--color-primary-50, #eff6ff);
}

/* ========== TOOLTIP SYSTEM ========== */

/**
 * Enhanced tooltip system for post titles
 * Provides context about link destination on hover
 */
.word-internal-link[title]:hover::after {
  content: attr(title);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-0.25rem);

  /* Tooltip styling */
  background: var(--color-gray-900, #111827);
  color: var(--color-gray-100, #f3f4f6);
  padding: 0.5rem 0.75rem;
  border-radius: 0.375rem;
  font-size: 0.875rem;
  font-weight: 500;
  line-height: 1.25rem;
  white-space: nowrap;
  max-width: 15rem;

  /* Visual enhancements */
  box-shadow:
    0 0.25rem 0.375rem rgba(0, 0, 0, 0.1),
    0 0.125rem 0.25rem rgba(0, 0, 0, 0.06);
  border: 0.0625rem solid var(--color-gray-700, #374151);

  /* Positioning and z-index */
  z-index: 1000;
  pointer-events: none;

  /* Animation */
  opacity: 0;
  animation: tooltip-appear 0.2s ease forwards;
}

.word-internal-link[title]:hover::before {
  content: '';
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-0.0625rem);

  /* Arrow styling */
  border: 0.25rem solid transparent;
  border-top-color: var(--color-gray-900, #111827);

  /* Positioning */
  z-index: 1000;
  pointer-events: none;

  /* Animation */
  opacity: 0;
  animation: tooltip-appear 0.2s ease forwards;
}

/* Tooltip animation */
@keyframes tooltip-appear {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-0.125rem);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(-0.25rem);
  }
}

/* ========== RESPONSIVE DESIGN ========== */

/**
 * Mobile and tablet optimizations
 * Ensures word links work well on all device sizes
 */
@media (max-width: 48rem) {
  /* 768px */
  .word-internal-link[title]:hover::after {
    font-size: 0.8125rem;
    padding: 0.4375rem 0.625rem;
    max-width: 12rem;
  }

  .word-link-subtle:hover {
    padding: 0.0625rem 0.0625rem;
    margin: -0.0625rem -0.0625rem;
  }
}

@media (max-width: 30rem) {
  /* 480px */
  .word-internal-link[title]:hover::after {
    font-size: 0.75rem;
    padding: 0.375rem 0.5rem;
    max-width: 10rem;
    /* Position tooltip above to avoid screen edge issues */
    bottom: auto;
    top: 100%;
    transform: translateX(-50%) translateY(0.25rem);
  }

  .word-internal-link[title]:hover::before {
    bottom: auto;
    top: 100%;
    transform: translateX(-50%) translateY(0.0625rem);
    border-top-color: transparent;
    border-bottom-color: var(--color-gray-900, #111827);
  }
}

/* ========== DARK MODE SUPPORT ========== */

/**
 * Dark mode adaptations
 * Ensures proper contrast and visibility in dark themes
 */
@media (prefers-color-scheme: dark) {
  .word-link-invisible:hover {
    color: var(--color-primary-400, #60a5fa);
    text-decoration-color: var(--color-primary-500, #3b82f6);
  }

  .word-link-invisible:focus {
    color: var(--color-primary-400, #60a5fa);
    background-color: var(--color-primary-900, #1e3a8a);
    outline-color: var(--color-primary-500, #3b82f6);
  }

  .word-link-subtle:hover {
    color: var(--color-primary-400, #60a5fa);
    border-bottom-color: var(--color-primary-500, #3b82f6);
    background-color: var(--color-primary-900, #1e3a8a);
  }

  .word-link-subtle:focus {
    color: var(--color-primary-400, #60a5fa);
    background-color: var(--color-primary-900, #1e3a8a);
    outline-color: var(--color-primary-500, #3b82f6);
  }

  .word-link-minimal {
    color: var(--color-primary-400, #60a5fa);
  }

  .word-link-minimal:hover {
    color: var(--color-primary-300, #93c5fd);
    text-decoration-color: var(--color-primary-400, #60a5fa);
  }

  .word-link-minimal:focus {
    color: var(--color-primary-300, #93c5fd);
    background-color: var(--color-primary-900, #1e3a8a);
    outline-color: var(--color-primary-500, #3b82f6);
  }

  /* Dark mode tooltips */
  .word-internal-link[title]:hover::after {
    background: var(--color-gray-100, #f3f4f6);
    color: var(--color-gray-900, #111827);
    border-color: var(--color-gray-300, #d1d5db);
  }

  .word-internal-link[title]:hover::before {
    border-top-color: var(--color-gray-100, #f3f4f6);
  }

  @media (max-width: 30rem) {
    .word-internal-link[title]:hover::before {
      border-top-color: transparent;
      border-bottom-color: var(--color-gray-100, #f3f4f6);
    }
  }
}

/* ========== ACCESSIBILITY ENHANCEMENTS ========== */

/**
 * High contrast mode support
 * Ensures visibility for users with visual impairments
 */
@media (prefers-contrast: high) {
  .word-internal-link:hover {
    background-color: var(--color-primary-900, #1e3a8a);
    color: var(--color-primary-100, #dbeafe);
    text-decoration: underline;
    outline: 0.125rem solid var(--color-primary-400, #60a5fa);
  }

  .word-internal-link[title]:hover::after {
    background: var(--color-gray-100, #f3f4f6);
    color: var(--color-gray-900, #111827);
    border: 0.125rem solid var(--color-gray-900, #111827);
  }
}

/**
 * Reduced motion support
 * Respects user preference for reduced animations
 */
@media (prefers-reduced-motion: reduce) {
  .word-internal-link {
    transition: none;
  }

  .word-internal-link[title]:hover::after,
  .word-internal-link[title]:hover::before {
    animation: none;
    opacity: 1;
  }
}

/**
 * Focus-visible support
 * Enhanced focus states for keyboard navigation
 */
.word-internal-link:focus-visible {
  outline: 0.125rem solid var(--color-primary-500, #3b82f6);
  outline-offset: 0.125rem;
  border-radius: 0.1875rem;
  background-color: var(--color-primary-50, #eff6ff);
}

/* ========== PRINT STYLES ========== */

/**
 * Print-friendly adaptations
 * Ensures word links are useful when printed
 */
@media print {
  .word-internal-link {
    color: var(--color-gray-900, #111827) !important;
    text-decoration: underline !important;
    background: none !important;
  }

  .word-internal-link[title]:hover::after,
  .word-internal-link[title]:hover::before {
    display: none !important;
  }

  /* Show URL in print (optional - can be enabled if needed) */
  .word-internal-link[href]::after {
    content: ' (' attr(href) ')';
    font-size: 0.75rem;
    color: var(--color-gray-600, #4b5563);
  }
}

/* ========== FALLBACK STYLES ========== */

/**
 * Fallback for browsers without CSS custom properties
 * Ensures basic functionality in older browsers
 */
@supports not (color: var(--color-primary-600)) {
  .word-link-invisible:hover {
    color: #2563eb;
    text-decoration-color: #60a5fa;
  }

  .word-link-subtle:hover {
    color: #2563eb;
    border-bottom-color: #60a5fa;
    background-color: #f8faff;
  }

  .word-link-minimal {
    color: #1d4ed8;
  }

  .word-link-minimal:hover {
    color: #1e40af;
    text-decoration-color: #3b82f6;
  }

  .word-internal-link[title]:hover::after {
    background: #111827;
    color: #f3f4f6;
  }

  .word-internal-link[title]:hover::before {
    border-top-color: #111827;
  }
}
